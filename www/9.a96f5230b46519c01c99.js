(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{OzlW:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("L3Fv"),a=t("wxbA"),o=t("fXoL");let c=(()=>{class CoreGradesCoursePageModule{}return CoreGradesCoursePageModule.ɵmod=o.wc({type:CoreGradesCoursePageModule}),CoreGradesCoursePageModule.ɵinj=o.vc({factory:function CoreGradesCoursePageModule_Factory(e){return new(e||CoreGradesCoursePageModule)},imports:[[r.a]]}),CoreGradesCoursePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&o.kd(c,{declarations:[a.a],imports:[r.a]}))},eoiU:function(e,n,t){"use strict";t.d(n,"a",(function(){return CoreSwipeNavigationItemsManager}));var r=t("mrSG"),a=t("pHTc"),o=t("CtbY");class CoreSwipeNavigationItemsManager extends o.a{start(){return Object(r.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(r.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(r.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return a.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const n=[];for(;e&&(n.push(...e.url),e.firstChild);)e=e.firstChild;return n.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,n){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.getItemBy(e);t&&(yield this.navigateToItem(t,{animationDirection:n,replace:!0}))}))}getItemBy(e){var n;return Object(r.a)(this,void 0,void 0,(function*(){const t=this.getSource().getItems(),r=null!==(n=this.selectedItem&&(null==t?void 0:t.indexOf(this.selectedItem)))&&void 0!==n?n:-1;if(-1===r||null===t)return null;const a=e>0?1:-1;let o=r,c=0;for(;c!==e;){if(o+=a,o<0)return null;if(o>=t.length)break;this.skipItemInSwipe(t[o])||(c+=a)}return c===e?t[o]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}},"q5/S":function(e,n,t){"use strict";t.d(n,"a",(function(){return CoreGradesCoursesSource}));var r=t("mrSG"),a=t("CvRw"),o=t("wo9T"),c=t("FvYb");class CoreGradesCoursesSource extends a.a{loadPageItems(){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield o.a.getCoursesGrades();return{items:yield c.a.getGradesCourseData(e)}}))}getItemPath(e){return e.courseid.toString()}}},wxbA:function(e,n,t){"use strict";t.d(n,"a",(function(){return E}));var r=t("mrSG"),a=t("3LXp"),o=t("wo9T"),c=t("FvYb"),i=t("9+EE"),_=t("bFG1"),d=t("pHTc"),s=t("Y+03"),g=t("j3ag"),l=t("eoiU"),m=t("baaQ"),u=t("q5/S"),p=t("6s78"),C=t("fXoL"),b=t("tyNb"),h=t("TEn/"),P=t("nt/U"),f=t("OZH1"),O=t("PgjG"),v=t("ofXK"),M=t("r8G5"),w=t("xpMl"),x=t("saTE"),I=t("3CSS"),G=t("eAud"),T=t("hMzs"),y=t("edOc"),k=t("sYmb");function CoreGradesCoursePage_core_empty_box_13_Template(e,n){1&e&&(C.zc(0,"core-empty-box",8),C.Pc(1,"translate")),2&e&&C.Vc("message",C.Qc(1,1,"core.grades.nogradesreturned"))}function CoreGradesCoursePage_div_14_th_4_Template(e,n){if(1&e&&(C.Ec(0,"th",14),C.pd(1),C.Pc(2,"translate"),C.Dc()),2&e){const e=n.$implicit;C.qc("ion-hide-md-down",e.hiddenPhone),C.Wc("id",e.name),C.mc("colspan",e.colspan),C.lc(1),C.rd(" ",C.Qc(2,5,"core.grades."+e.name)," ")}}function CoreGradesCoursePage_div_14_ng_container_6_tr_1_Template(e,n){if(1&e&&(C.Ec(0,"tr"),C.zc(1,"td",18),C.Dc()),2&e){const e=C.Oc().$implicit;C.lc(1),C.mc("rowspan",e.rowspan)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_td_1_Template(e,n){if(1&e&&C.zc(0,"td",27),2&e){const e=C.Oc(3).$implicit;C.mc("rowspan",e.rowspan)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_3_Template(e,n){if(1&e&&C.zc(0,"ion-icon",28),2&e){const e=C.Oc(3).$implicit;C.qc("expandable-status-icon-expanded",e.expanded)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_4_Template(e,n){if(1&e&&C.zc(0,"ion-icon",29),2&e){const e=C.Oc(3).$implicit;C.Wc("name",e.icon),C.mc("aria-label",e.iconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_img_5_Template(e,n){if(1&e&&C.zc(0,"img",30),2&e){const e=C.Oc(3).$implicit;C.Vc("src",e.image,C.id)("alt",e.iconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_core_mod_icon_6_Template(e,n){if(1&e&&C.zc(0,"core-mod-icon",31),2&e){const e=C.Oc(3).$implicit;C.Vc("modicon",e.image)("modname",e.itemmodule)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_1_Template(e,n){if(1&e&&C.zc(0,"td",26),2&e){const e=C.Oc().$implicit,n=C.Oc(4).$implicit;C.nc("ion-text-start core-grades-table-"+e.name),C.qc("ion-hide-md-down",e.hiddenPhone),C.Vc("innerHTML",n[e.name],C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_2_Template(e,n){if(1&e&&(C.Ec(0,"td",35),C.zc(1,"core-format-text",36),C.Dc()),2&e){const e=C.Oc().$implicit,n=C.Oc(4).$implicit,t=C.Oc(2);C.qc("ion-hide-md-down",e.hiddenPhone),C.lc(1),C.Vc("text",n.feedback)("contextInstanceId",t.courseId)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_ion_icon_1_Template(e,n){if(1&e&&C.zc(0,"ion-icon",38),2&e){const e=C.Oc(6).$implicit;C.Vc("name",e.gradeIcon),C.mc("aria-label",e.gradeIconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_Template(e,n){if(1&e&&(C.Ec(0,"td"),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_ion_icon_1_Template,1,2,"ion-icon",37),C.zc(2,"span",26),C.Dc()),2&e){const e=C.Oc().$implicit,n=C.Oc(4).$implicit;C.oc("ion-text-start core-grades-table-grade ",n.gradeClass,""),C.qc("ion-hide-md-down",e.hiddenPhone),C.lc(1),C.Vc("ngIf",n.gradeIcon),C.lc(1),C.Vc("innerHTML",n[e.name],C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_Template(e,n){if(1&e&&(C.Cc(0),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_1_Template,1,5,"td",32),C.nd(2,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_2_Template,2,4,"td",33),C.nd(3,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_Template,3,7,"td",34),C.Bc()),2&e){const e=n.$implicit,t=C.Oc(4).$implicit;C.lc(1),C.Vc("ngIf","gradeitem"!==e.name&&"feedback"!==e.name&&"grade"!==e.name&&void 0!==t[e.name]),C.lc(1),C.Vc("ngIf","feedback"===e.name&&void 0!==t.feedback),C.lc(1),C.Vc("ngIf","grade"===e.name)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_Template(e,n){if(1&e&&(C.Cc(0),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_Template,4,3,"ng-container",12),C.Bc()),2&e){const e=C.Oc(5);C.lc(1),C.Vc("ngForOf",e.columns)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_Template(e,n){if(1&e&&(C.Cc(0),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_td_1_Template,1,1,"td",20),C.Ec(2,"th",21),C.nd(3,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_3_Template,1,2,"ion-icon",22),C.nd(4,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_4_Template,1,2,"ion-icon",23),C.nd(5,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_img_5_Template,1,2,"img",24),C.nd(6,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_core_mod_icon_6_Template,1,2,"core-mod-icon",25),C.zc(7,"span",26),C.Dc(),C.nd(8,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_Template,2,1,"ng-container",15),C.Bc()),2&e){const e=C.Oc(2).$implicit,n=C.Oc(2);C.lc(1),C.Vc("ngIf","category"==e.itemtype),C.lc(1),C.mc("colspan",e.colspan),C.lc(1),C.Vc("ngIf",e.expandable&&n.showSummary),C.lc(1),C.Vc("ngIf",e.icon),C.lc(1),C.Vc("ngIf",e.image&&!e.itemmodule),C.lc(1),C.Vc("ngIf",e.image&&e.itemmodule),C.lc(1),C.Vc("innerHTML",e.gradeitem,C.gd),C.lc(1),C.Vc("ngIf","category"!==e.itemtype)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template(e,n){if(1&e){const e=C.Fc();C.Ec(0,"tr",19),C.Mc("ariaButtonClick",(function CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template_tr_ariaButtonClick_0_listener(){C.fd(e);const n=C.Oc().$implicit,t=C.Oc(2);return n.expandable&&t.showSummary&&t.toggleRow(n)})),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_Template,9,8,"ng-container",15),C.Dc()}if(2&e){const e=C.Oc().$implicit,n=C.Oc(2);C.nc(e.rowclass),C.qc("core-grades-grade-clickable",e.expandable&&n.showSummary),C.Vc("id","grade-"+e.id),C.mc("role",e.expandable&&n.showSummary?"button row":"row")("tabindex",e.expandable&&n.showSummary&&0)("aria-expanded",e.expanded)("aria-label",n.rowAriaLabel(e))("aria-controls",e.detailsid),C.lc(1),C.Vc("ngIf",e.itemtype)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_3_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.weight")),C.lc(2),C.Vc("innerHTML",e.weight,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_4_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.grade")),C.lc(2),C.Vc("innerHTML",e.grade,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_5_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.range")),C.lc(2),C.Vc("innerHTML",e.range,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_6_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.percentage")),C.lc(2),C.Vc("innerHTML",e.percentage,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_7_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.lettergrade")),C.lc(2),C.Vc("innerHTML",e.lettergrade,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_8_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.rank")),C.lc(2),C.Vc("innerHTML",e.rank,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_9_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.average")),C.lc(2),C.Vc("innerHTML",e.average,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_10_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.Ec(5,"p"),C.zc(6,"core-format-text",36),C.Dc(),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit,n=C.Oc(2);C.lc(3),C.qd(C.Qc(4,3,"core.grades.feedback")),C.lc(3),C.Vc("text",e.feedback)("contextInstanceId",n.courseId)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_11_Template(e,n){if(1&e&&(C.Ec(0,"ion-item",41),C.Ec(1,"ion-label"),C.Ec(2,"p",42),C.pd(3),C.Pc(4,"translate"),C.Dc(),C.zc(5,"p",26),C.Dc(),C.Dc()),2&e){const e=C.Oc(2).$implicit;C.lc(3),C.qd(C.Qc(4,2,"core.grades.contributiontocoursetotal")),C.lc(2),C.Vc("innerHTML",e.contributiontocoursetotal,C.gd)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_Template(e,n){if(1&e&&(C.Ec(0,"tr",39),C.Ec(1,"td"),C.Ec(2,"ion-list"),C.nd(3,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_3_Template,6,4,"ion-item",40),C.nd(4,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_4_Template,6,4,"ion-item",40),C.nd(5,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_5_Template,6,4,"ion-item",40),C.nd(6,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_6_Template,6,4,"ion-item",40),C.nd(7,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_7_Template,6,4,"ion-item",40),C.nd(8,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_8_Template,6,4,"ion-item",40),C.nd(9,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_9_Template,6,4,"ion-item",40),C.nd(10,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_10_Template,7,5,"ion-item",40),C.nd(11,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_11_Template,6,4,"ion-item",40),C.Dc(),C.Dc(),C.Dc()),2&e){const e=C.Oc().$implicit,n=C.Oc(2);C.nc(e.rowclass),C.Vc("id",e.detailsid),C.lc(1),C.mc("colspan",n.totalColumnsSpan),C.lc(2),C.Vc("ngIf",e.weight),C.lc(1),C.Vc("ngIf",e.grade),C.lc(1),C.Vc("ngIf",e.range),C.lc(1),C.Vc("ngIf",e.percentage),C.lc(1),C.Vc("ngIf",e.lettergrade),C.lc(1),C.Vc("ngIf",e.rank),C.lc(1),C.Vc("ngIf",e.average),C.lc(1),C.Vc("ngIf",e.feedback),C.lc(1),C.Vc("ngIf",e.contributiontocoursetotal)}}function CoreGradesCoursePage_div_14_ng_container_6_Template(e,n){if(1&e&&(C.Cc(0),C.nd(1,CoreGradesCoursePage_div_14_ng_container_6_tr_1_Template,2,1,"tr",15),C.nd(2,CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template,2,11,"tr",16),C.nd(3,CoreGradesCoursePage_div_14_ng_container_6_tr_3_Template,12,13,"tr",17),C.Bc()),2&e){const e=n.$implicit;C.lc(1),C.Vc("ngIf","leader"===e.itemtype),C.lc(1),C.Vc("ngIf","leader"!==e.itemtype),C.lc(1),C.Vc("ngIf",e.expandable&&e.expanded)}}function CoreGradesCoursePage_div_14_Template(e,n){if(1&e){const e=C.Fc();C.Ec(0,"div",9),C.Ec(1,"table",10),C.Ec(2,"thead"),C.Ec(3,"tr"),C.nd(4,CoreGradesCoursePage_div_14_th_4_Template,3,7,"th",11),C.Dc(),C.Dc(),C.Ec(5,"tbody"),C.nd(6,CoreGradesCoursePage_div_14_ng_container_6_Template,4,3,"ng-container",12),C.Pc(7,"slice"),C.Dc(),C.Dc(),C.Ec(8,"core-infinite-loading",13),C.Mc("action",(function CoreGradesCoursePage_div_14_Template_core_infinite_loading_action_8_listener(n){C.fd(e);return C.Oc().loadMore(n)})),C.Dc(),C.Dc()}if(2&e){const e=C.Oc();C.lc(1),C.qc("summary",e.showSummary),C.lc(3),C.Vc("ngForOf",e.columns),C.lc(2),C.Vc("ngForOf",C.Sc(7,5,e.rows,0,e.rowsOnView)),C.lc(2),C.Vc("enabled",e.rowsOnView<e.rows.length)}}let E=(()=>{class CoreGradesCoursePage{constructor(e,n){var t,r;this.route=e,this.element=n,this.columns=[],this.rows=[],this.rowsOnView=0,this.fetchSuccess=!1;try{if(this.courseId=d.a.getRequiredRouteNumberParam("courseId",{route:e}),this.userId=null!==(t=d.a.getRouteNumberParam("userId",{route:e}))&&void 0!==t?t:i.b.getCurrentSiteUserId(),this.gradeId=d.a.getRouteNumberParam("gradeId",{route:e}),this.expandLabel=g.I.instant("core.expand"),this.collapseLabel=g.I.instant("core.collapse"),this.useLegacyLayout=!i.b.getRequiredCurrentSite().isVersionGreaterEqualThan("4.1"),null===(r=e.snapshot.data.swipeEnabled)||void 0===r||r){const e=m.a.getOrCreateSource(u.a,[]);this.courses=new l.a(e)}}catch(e){return a.a.showErrorModal(e),d.a.back(),void 0}}get showSummary(){return s.a.isMobile||!!this.withinSplitView}ngAfterViewInit(){var e,n;return Object(r.a)(this,void 0,void 0,(function*(){this.withinSplitView=!!(null===(e=this.element.nativeElement.parentElement)||void 0===e?void 0:e.closest("core-split-view")),yield null===(n=this.courses)||void 0===n?void 0:n.start(),yield this.fetchInitialGrades()}))}ngOnDestroy(){var e;null===(e=this.courses)||void 0===e?void 0:e.destroy()}rowAriaLabel(e){if(!e.expandable||!this.showSummary)return;return`${e.expanded?this.collapseLabel:this.expandLabel} ${e.ariaLabel}`}toggleRow(e,n){var t;if(!this.rows||!this.columns)return;e.expanded=null!=n?n:!e.expanded;let r=this.columns.length+(null!==(t=e.colspan)&&void 0!==t?t:0);this.useLegacyLayout&&r--;for(let n=this.rows.indexOf(e)-1;n>=0;n--){const t=this.rows[n];!t.rowspan||!t.colspan||t.colspan!==r||!this.useLegacyLayout&&"leader"!==t.itemtype||this.useLegacyLayout&&t.expandable||(r++,t.rowspan+=e.expanded?1:-1)}}refreshGrades(e){return Object(r.a)(this,void 0,void 0,(function*(){yield _.a.ignoreErrors(o.a.invalidateCourseGradesData(this.courseId,this.userId)),yield _.a.ignoreErrors(this.fetchGrades()),null==e||e.complete()}))}fetchInitialGrades(){return Object(r.a)(this,void 0,void 0,(function*(){try{if(yield this.fetchGrades(),this.gradeId&&this.rows){const e=this.rows.find((e=>e.id==this.gradeId));e&&(this.toggleRow(e,!0),p.a.scrollToElement(this.element.nativeElement,"#grade-"+e.id),this.gradeId=void 0)}}catch(e){a.a.showErrorModalDefault(e,"Error loading course"),this.columns=[],this.rows=[],this.rowsOnView=0}}))}fetchGrades(){var e,n;return Object(r.a)(this,void 0,void 0,(function*(){const t=yield o.a.getCourseGradesTable(this.courseId,this.userId),r=c.a.formatGradesTable(t);this.title=null!==(n=null===(e=r.rows[0])||void 0===e?void 0:e.gradeitem)&&void 0!==n?n:g.I.instant("core.grades.grades"),this.columns=r.columns,this.rows=r.rows,this.rowsOnView=this.getRowsOnHeight(),this.totalColumnsSpan=r.columns.reduce(((e,n)=>e+n.colspan),0),this.fetchSuccess||(this.fetchSuccess=!0,yield o.a.logCourseGradesView(this.courseId,this.userId))}))}getRowsOnHeight(){return Math.floor(window.innerHeight/44)}loadMore(e){this.rowsOnView+=this.getRowsOnHeight(),e&&e()}}return CoreGradesCoursePage.ɵfac=function CoreGradesCoursePage_Factory(e){return new(e||CoreGradesCoursePage)(C.yc(b.a),C.yc(C.r))},CoreGradesCoursePage.ɵcmp=C.sc({type:CoreGradesCoursePage,selectors:[["page-core-grades-course"]],decls:15,vars:12,consts:[["slot","start"],[3,"text"],[3,"core-swipe-navigation"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-chart-bar",3,"message",4,"ngIf"],["class","core-grades-container",4,"ngIf"],["icon","fas-chart-bar",3,"message"],[1,"core-grades-container"],[1,"core-grades-table"],["class","ion-text-start",3,"id","ion-hide-md-down",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"enabled","action"],[1,"ion-text-start",3,"id"],[4,"ngIf"],[3,"class","core-grades-grade-clickable","id","ariaButtonClick",4,"ngIf"],[3,"id","class",4,"ngIf"],[1,"core-grades-table-leader"],[3,"id","ariaButtonClick"],["class","core-grades-table-category",4,"ngIf"],[1,"core-grades-table-gradeitem","ion-text-start"],["aria-hidden","true","slot","start","name","fas-chevron-right","class","expandable-status-icon",3,"expandable-status-icon-expanded",4,"ngIf"],["slot","start",3,"name",4,"ngIf"],["slot","start","class","core-module-icon",3,"src","alt",4,"ngIf"],["slot","start",3,"modicon","modname",4,"ngIf"],[3,"innerHTML"],[1,"core-grades-table-category"],["aria-hidden","true","slot","start","name","fas-chevron-right",1,"expandable-status-icon"],["slot","start",3,"name"],["slot","start",1,"core-module-icon",3,"src","alt"],["slot","start",3,"modicon","modname"],[3,"class","ion-hide-md-down","innerHTML",4,"ngIf"],["class","ion-text-start core-grades-table-feedback",3,"ion-hide-md-down",4,"ngIf"],[3,"ion-hide-md-down","class",4,"ngIf"],[1,"ion-text-start","core-grades-table-feedback"],["collapsible-item","","contextLevel","course",3,"text","contextInstanceId"],[3,"name",4,"ngIf"],[3,"name"],[3,"id"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"]],template:function CoreGradesCoursePage_Template(e,n){1&e&&(C.Ec(0,"ion-header"),C.Ec(1,"ion-toolbar"),C.Ec(2,"ion-buttons",0),C.zc(3,"ion-back-button",1),C.Pc(4,"translate"),C.Dc(),C.Ec(5,"ion-title"),C.Ec(6,"h1"),C.pd(7),C.Dc(),C.Dc(),C.Dc(),C.Dc(),C.Ec(8,"ion-content",2),C.Ec(9,"ion-refresher",3),C.Mc("ionRefresh",(function CoreGradesCoursePage_Template_ion_refresher_ionRefresh_9_listener(e){return n.refreshGrades(e.target)})),C.zc(10,"ion-refresher-content",4),C.Pc(11,"translate"),C.Dc(),C.Ec(12,"core-loading",5),C.nd(13,CoreGradesCoursePage_core_empty_box_13_Template,2,3,"core-empty-box",6),C.nd(14,CoreGradesCoursePage_div_14_Template,9,9,"div",7),C.Dc(),C.Dc()),2&e&&(C.lc(3),C.Vc("text",C.Qc(4,8,"core.back")),C.lc(4),C.qd(n.title),C.lc(1),C.Vc("core-swipe-navigation",n.courses),C.lc(1),C.Vc("disabled",!n.columns||!n.rows),C.lc(1),C.Wc("pullingText",C.Qc(11,10,"core.pulltorefresh")),C.lc(2),C.Vc("hideUntil",n.columns&&n.rows),C.lc(1),C.Vc("ngIf",!n.rows.length),C.lc(1),C.Vc("ngIf",n.rows.length))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,P.a,h.v,f.a,h.bb,h.cb,O.a,v.t,M.a,v.s,w.a,x.a,h.D,I.a,G.a,T.a,y.a,h.P,h.I,h.O],pipes:[k.d,v.E],styles:["[_nghost-%COMP%]{--header-background:var(--white);--odd-cell-background:var(--light);--odd-cell-hover:var(--gray-200);--even-cell-background:var(--white);--even-cell-hover:var(--light);--icon-color:var(--gray-500);--border-color:var(--stroke);--mod-icon-filter:brightness(0)}[_nghost-%COMP%]   .odd[_ngcontent-%COMP%]{--cell-background:var(--odd-cell-background);--cell-hover:var(--odd-cell-hover)}[_nghost-%COMP%]   .even[_ngcontent-%COMP%]{--cell-background:var(--even-cell-background);--cell-hover:var(--even-cell-hover)}html.dark[_nghost-%COMP%], html.dark   [_nghost-%COMP%]{--header-background:var(--gray-900);--odd-cell-background:var(--gray-800);--odd-cell-hover:var(--gray-600);--even-cell-background:var(--gray-900);--even-cell-hover:var(--gray-700);--icon-color:var(--gray-200);--mod-icon-filter:brightness(0) invert(1)}.core-grades-table[_ngcontent-%COMP%]{border-collapse:collapse;line-height:20px;width:100%;font-size:16px;color:var(--ion-text-color)}.core-grades-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color)}.core-grades-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-right:8px;padding-top:8px;padding-bottom:8px;vertical-align:top;white-space:normal;text-align:start}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-right:unset;-webkit-padding-end:8px;padding-inline-end:8px}}.core-grades-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;font-weight:700;background-color:var(--header-background)}.core-grades-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-left:24px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:24px;padding-inline-start:24px}}.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400}.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.core-bold[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:inherit}.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-left:4px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:4px;padding-inline-start:4px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]{padding-left:4px;font-weight:700}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:4px;padding-inline-start:4px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem.column-itemname[_ngcontent-%COMP%]{padding-left:0}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem.column-itemname[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:0;padding-inline-start:0}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   core-mod-icon[_ngcontent-%COMP%]{padding:0;--size:16px;background:transparent;--filter:var(--mod-icon-filter)}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--icon-color)}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:unset;-webkit-margin-start:4px;margin-inline-start:4px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   .expandable-status-icon[_ngcontent-%COMP%]{font-size:var(--text-size);margin-left:0;margin-right:2px;transition:transform .2s ease-in-out}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   .expandable-status-icon[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   .expandable-status-icon.expandable-status-icon-expanded[_ngcontent-%COMP%]{transform:var(--rotate-expandable)}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-feedback[_ngcontent-%COMP%]{padding-left:4px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-feedback[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:4px;padding-inline-start:4px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-feedback[_ngcontent-%COMP%]   .no-overflow[_ngcontent-%COMP%]{overflow:auto}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-grade[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-right:4px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-grade[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-right:unset;-webkit-padding-end:4px;padding-inline-end:4px}}.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-leader[_ngcontent-%COMP%]{width:0}.core-grades-table[_ngcontent-%COMP%]   .ion-no-border[_ngcontent-%COMP%]{border:0!important}.core-grades-table[_ngcontent-%COMP%]   .dimmed_text[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{opacity:.7}.core-grades-table[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]   th[aria-current=page][_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .odd[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .odd[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .odd[_ngcontent-%COMP%]   th[aria-current=page][_ngcontent-%COMP%]{background-color:var(--cell-background)}.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]{cursor:pointer}.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   th[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   th[aria-current=page][_ngcontent-%COMP%]{background-color:var(--cell-hover)}.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:var(--a11y-min-target-size);vertical-align:middle}.core-grades-table[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native), .core-grades-table[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background-color:initial}.core-grades-table.summary[_ngcontent-%COMP%]   .ion-hide-md-down[_ngcontent-%COMP%]{display:none;opacity:0}@media (max-width:767.98px){.core-grades-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.85em}}"]}),CoreGradesCoursePage})()}}]);