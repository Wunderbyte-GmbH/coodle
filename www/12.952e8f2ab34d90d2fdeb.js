(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{RDa7:function(e,i,t){"use strict";t.r(i),t.d(i,"CoreUserProfilePageModule",(function(){return w}));var o=t("tyNb"),n=t("L3Fv"),r=t("mrSG"),s=t("9+EE"),c=t("3LXp"),a=t("fjkH"),l=t("4pns"),_=t("F9j1"),d=t("+jPs"),u=t("bFG1"),f=t("pHTc"),m=t("Xzvb"),g=t("eoiU"),p=t("xtzZ"),P=t("baaQ"),h=t("fXoL"),b=t("TEn/"),C=t("nt/U"),v=t("OZH1"),I=t("PgjG"),U=t("ofXK"),T=t("FeAf"),y=t("3CSS"),O=t("ACYt"),E=t("r8G5"),x=t("sYmb"),D=t("lAaw");function CoreUserProfilePage_ion_list_13_p_6_Template(e,i){if(1&e&&(h.Ec(0,"p"),h.zc(1,"ion-icon",16),h.pd(2),h.Dc()),2&e){const e=h.Oc(2);h.lc(1),h.mc("aria-hidden",!0),h.lc(1),h.rd(" ",e.user.address," ")}}function CoreUserProfilePage_ion_list_13_p_7_Template(e,i){if(1&e&&(h.Ec(0,"p"),h.Ec(1,"strong"),h.pd(2),h.Pc(3,"translate"),h.Dc(),h.pd(4),h.Pc(5,"translate"),h.Dc()),2&e){const e=h.Oc(2);h.lc(2),h.qd(h.Qc(3,3,"core.user.roles")),h.lc(2),h.sd("",h.Qc(5,5,"core.labelsep")," ",e.rolesFormatted," ")}}function CoreUserProfilePage_ion_list_13_p_8_span_4_Template(e,i){if(1&e&&(h.Ec(0,"span"),h.pd(1),h.Pc(2,"coreTimeAgo"),h.Dc()),2&e){const e=h.Oc(3);h.lc(1),h.qd(h.Qc(2,1,e.user.lastaccess))}}function CoreUserProfilePage_ion_list_13_p_8_ng_container_5_Template(e,i){1&e&&(h.Cc(0),h.pd(1),h.Pc(2,"translate"),h.Bc()),2&e&&(h.lc(1),h.qd(h.Qc(2,1,"core.never")))}function CoreUserProfilePage_ion_list_13_p_8_Template(e,i){if(1&e&&(h.Ec(0,"p"),h.Ec(1,"strong"),h.pd(2),h.Pc(3,"translate"),h.Dc(),h.nd(4,CoreUserProfilePage_ion_list_13_p_8_span_4_Template,3,3,"span",6),h.nd(5,CoreUserProfilePage_ion_list_13_p_8_ng_container_5_Template,3,3,"ng-container",6),h.Dc()),2&e){const e=h.Oc(2);h.lc(2),h.rd("",h.Qc(3,3,"core.lastaccess"),": "),h.lc(2),h.Vc("ngIf",e.user.lastaccess),h.lc(1),h.Vc("ngIf",!e.user.lastaccess)}}function CoreUserProfilePage_ion_list_13_div_9_ion_item_1_ion_button_2_ion_icon_2_Template(e,i){if(1&e&&h.zc(0,"ion-icon",21),2&e){const e=h.Oc().$implicit;h.Vc("name",e.icon)}}const _c0=function(e){return["core-user-profile-handler",e]};function CoreUserProfilePage_ion_list_13_div_9_ion_item_1_ion_button_2_Template(e,i){if(1&e){const e=h.Fc();h.Ec(0,"ion-button",19),h.Mc("click",(function CoreUserProfilePage_ion_list_13_div_9_ion_item_1_ion_button_2_Template_ion_button_click_0_listener(t){h.fd(e);const o=i.$implicit;return h.Oc(4).handlerClicked(t,o)})),h.Pc(1,"translate"),h.nd(2,CoreUserProfilePage_ion_list_13_div_9_ion_item_1_ion_button_2_ion_icon_2_Template,1,1,"ion-icon",20),h.pd(3),h.Pc(4,"translate"),h.Dc()}if(2&e){const e=i.$implicit;h.Vc("ngClass",h.ad(10,_c0,e.class||""))("hidden",e.hidden)("disabled",e.spinner),h.mc("aria-label",h.Qc(1,6,e.title)),h.lc(2),h.Vc("ngIf",e.icon),h.lc(1),h.rd(" ",h.Qc(4,8,e.title)," ")}}function CoreUserProfilePage_ion_list_13_div_9_ion_item_1_Template(e,i){if(1&e&&(h.Ec(0,"ion-item"),h.Ec(1,"ion-label"),h.nd(2,CoreUserProfilePage_ion_list_13_div_9_ion_item_1_ion_button_2_Template,5,12,"ion-button",18),h.Dc(),h.Dc()),2&e){const e=h.Oc(3);h.lc(2),h.Vc("ngForOf",e.communicationHandlers)}}function CoreUserProfilePage_ion_list_13_div_9_div_2_Template(e,i){1&e&&(h.Ec(0,"div",22),h.zc(1,"ion-spinner"),h.Pc(2,"translate"),h.Dc()),2&e&&(h.lc(1),h.mc("aria-label",h.Qc(2,1,"core.loading")))}function CoreUserProfilePage_ion_list_13_div_9_Template(e,i){if(1&e&&(h.Ec(0,"div",17),h.nd(1,CoreUserProfilePage_ion_list_13_div_9_ion_item_1_Template,3,1,"ion-item",6),h.nd(2,CoreUserProfilePage_ion_list_13_div_9_div_2_Template,3,3,"div",14),h.Dc()),2&e){const e=h.Oc(2);h.lc(1),h.Vc("ngIf",e.communicationHandlers&&e.communicationHandlers.length),h.lc(1),h.Vc("ngIf",e.isLoadingHandlers)}}function CoreUserProfilePage_ion_list_13_ion_item_17_Template(e,i){1&e&&(h.Ec(0,"ion-item",22),h.Ec(1,"ion-label"),h.zc(2,"ion-spinner"),h.Pc(3,"translate"),h.Dc(),h.Dc()),2&e&&(h.lc(2),h.mc("aria-label",h.Qc(3,1,"core.loading")))}function CoreUserProfilePage_ion_list_13_ion_item_18_ion_icon_2_Template(e,i){if(1&e&&h.zc(0,"ion-icon",21),2&e){const e=h.Oc().$implicit;h.Vc("name",e.icon)}}function CoreUserProfilePage_ion_list_13_ion_item_18_ion_badge_7_Template(e,i){if(1&e&&(h.Ec(0,"ion-badge",27),h.pd(1),h.Dc()),2&e){const e=h.Oc().$implicit;h.Vc("hidden",e.loading||!e.badge),h.lc(1),h.rd(" ",e.badge," ")}}const _c1=function(e){return{$a:e}};function CoreUserProfilePage_ion_list_13_ion_item_18_span_8_Template(e,i){if(1&e&&(h.Ec(0,"span",28),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&e){const e=h.Oc().$implicit;h.lc(1),h.rd(" ",h.Rc(2,1,e.badgeA11yText,h.ad(4,_c1,e.badge))," ")}}function CoreUserProfilePage_ion_list_13_ion_item_18_ion_spinner_9_Template(e,i){1&e&&(h.zc(0,"ion-spinner",29),h.Pc(1,"translate")),2&e&&h.mc("aria-label",h.Qc(1,1,"core.loading"))}function CoreUserProfilePage_ion_list_13_ion_item_18_Template(e,i){if(1&e){const e=h.Fc();h.Ec(0,"ion-item",23),h.Mc("click",(function CoreUserProfilePage_ion_list_13_ion_item_18_Template_ion_item_click_0_listener(t){h.fd(e);const o=i.$implicit;return h.Oc(2).handlerClicked(t,o)})),h.Pc(1,"translate"),h.nd(2,CoreUserProfilePage_ion_list_13_ion_item_18_ion_icon_2_Template,1,1,"ion-icon",20),h.Ec(3,"ion-label"),h.Ec(4,"p",13),h.pd(5),h.Pc(6,"translate"),h.Dc(),h.Dc(),h.nd(7,CoreUserProfilePage_ion_list_13_ion_item_18_ion_badge_7_Template,2,2,"ion-badge",24),h.nd(8,CoreUserProfilePage_ion_list_13_ion_item_18_span_8_Template,3,6,"span",25),h.nd(9,CoreUserProfilePage_ion_list_13_ion_item_18_ion_spinner_9_Template,2,3,"ion-spinner",26),h.Dc()}if(2&e){const e=i.$implicit;h.Vc("ngClass",h.ad(12,_c0,e.class||""))("hidden",e.hidden),h.mc("aria-label",h.Qc(1,8,e.title)),h.lc(2),h.Vc("ngIf",e.icon),h.lc(3),h.qd(h.Qc(6,10,e.title)),h.lc(2),h.Vc("ngIf",e.showBadge),h.lc(1),h.Vc("ngIf",e.showBadge&&e.badge&&e.badgeA11yText),h.lc(1),h.Vc("ngIf",e.showBadge&&e.loading)}}function CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_ion_icon_2_Template(e,i){if(1&e&&h.zc(0,"ion-icon",21),2&e){const e=h.Oc().$implicit;h.Vc("name",e.icon)}}function CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_ion_spinner_5_Template(e,i){1&e&&(h.zc(0,"ion-spinner",29),h.Pc(1,"translate")),2&e&&h.mc("aria-label",h.Qc(1,1,"core.loading"))}function CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_Template(e,i){if(1&e){const e=h.Fc();h.Ec(0,"ion-button",31),h.Mc("click",(function CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_Template_ion_button_click_0_listener(t){h.fd(e);const o=i.$implicit;return h.Oc(3).handlerClicked(t,o)})),h.Pc(1,"translate"),h.nd(2,CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_ion_icon_2_Template,1,1,"ion-icon",20),h.pd(3),h.Pc(4,"translate"),h.nd(5,CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_ion_spinner_5_Template,2,3,"ion-spinner",26),h.Dc()}if(2&e){const e=i.$implicit;h.Vc("ngClass",h.ad(11,_c0,e.class||""))("hidden",e.hidden)("disabled",e.spinner),h.mc("aria-label",h.Qc(1,7,e.title)),h.lc(2),h.Vc("ngIf",e.icon),h.lc(1),h.rd(" ",h.Qc(4,9,e.title)," "),h.lc(2),h.Vc("ngIf",e.spinner)}}function CoreUserProfilePage_ion_list_13_ion_item_19_Template(e,i){if(1&e&&(h.Ec(0,"ion-item"),h.Ec(1,"ion-label"),h.nd(2,CoreUserProfilePage_ion_list_13_ion_item_19_ion_button_2_Template,6,13,"ion-button",30),h.Dc(),h.Dc()),2&e){const e=h.Oc(2);h.lc(2),h.Vc("ngForOf",e.actionHandlers)}}function CoreUserProfilePage_ion_list_13_Template(e,i){if(1&e){const e=h.Fc();h.Ec(0,"ion-list"),h.Ec(1,"ion-item",8),h.zc(2,"core-user-avatar",9),h.Ec(3,"ion-label"),h.Ec(4,"h2"),h.pd(5),h.Dc(),h.nd(6,CoreUserProfilePage_ion_list_13_p_6_Template,3,2,"p",6),h.nd(7,CoreUserProfilePage_ion_list_13_p_7_Template,6,7,"p",6),h.nd(8,CoreUserProfilePage_ion_list_13_p_8_Template,6,5,"p",6),h.Dc(),h.Dc(),h.nd(9,CoreUserProfilePage_ion_list_13_div_9_Template,3,2,"div",10),h.Ec(10,"ion-item",11),h.Mc("click",(function CoreUserProfilePage_ion_list_13_Template_ion_item_click_10_listener(){h.fd(e);return h.Oc().openUserDetails()})),h.Pc(11,"translate"),h.zc(12,"ion-icon",12),h.Ec(13,"ion-label"),h.Ec(14,"p",13),h.pd(15),h.Pc(16,"translate"),h.Dc(),h.Dc(),h.Dc(),h.nd(17,CoreUserProfilePage_ion_list_13_ion_item_17_Template,4,3,"ion-item",14),h.nd(18,CoreUserProfilePage_ion_list_13_ion_item_18_Template,10,14,"ion-item",15),h.nd(19,CoreUserProfilePage_ion_list_13_ion_item_19_Template,3,1,"ion-item",6),h.Dc()}if(2&e){const e=h.Oc();h.lc(2),h.Vc("user",e.user)("userId",e.user.id)("linkProfile",!1)("checkOnline",!0),h.lc(3),h.qd(e.user.fullname),h.lc(1),h.Vc("ngIf",e.user.address),h.lc(1),h.Vc("ngIf",e.rolesFormatted),h.lc(1),h.Vc("ngIf",void 0!==e.user.lastaccess),h.lc(1),h.Vc("ngIf",e.communicationHandlers&&e.communicationHandlers.length||e.isLoadingHandlers),h.lc(1),h.mc("aria-label",h.Qc(11,14,"core.user.details")),h.lc(5),h.qd(h.Qc(16,16,"core.user.details")),h.lc(2),h.Vc("ngIf",e.isLoadingHandlers),h.lc(1),h.Vc("ngForOf",e.newPageHandlers),h.lc(1),h.Vc("ngIf",e.actionHandlers&&e.actionHandlers.length)}}function CoreUserProfilePage_core_empty_box_14_Template(e,i){1&e&&(h.zc(0,"core-empty-box",32),h.Pc(1,"translate")),2&e&&h.Vc("message",h.Qc(1,1,"core.user.detailsnotavailable"))}function CoreUserProfilePage_core_empty_box_15_Template(e,i){1&e&&(h.zc(0,"core-empty-box",32),h.Pc(1,"translate")),2&e&&h.Vc("message",h.Qc(1,1,"core.userdeleted"))}function CoreUserProfilePage_core_empty_box_16_Template(e,i){1&e&&(h.zc(0,"core-empty-box",32),h.Pc(1,"translate")),2&e&&h.Vc("message",h.Qc(1,1,"core.usersuspended"))}function CoreUserProfilePage_core_empty_box_17_Template(e,i){1&e&&(h.zc(0,"core-empty-box",32),h.Pc(1,"translate")),2&e&&h.Vc("message",h.Qc(1,1,"core.notenrolledprofile"))}let k=(()=>{class CoreUserProfilePage{constructor(e){this.route=e,this.fetchSuccess=!1,this.userLoaded=!1,this.isLoadingHandlers=!1,this.isDeleted=!1,this.isSuspended=!1,this.isEnrolled=!0,this.actionHandlers=[],this.newPageHandlers=[],this.communicationHandlers=[],this.obsProfileRefreshed=a.b.on(l.d,(e=>{this.user&&e.user&&(this.user.email=e.user.email,this.user.address=_.a.formatAddress("",e.user.city,e.user.country))}),s.b.getCurrentSiteId())}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){try{this.site=s.b.getRequiredCurrentSite(),this.courseId=f.a.getRouteNumberParam("courseId"),this.userId=f.a.getRequiredRouteNumberParam("userId")}catch(e){return c.a.showErrorModal(e),f.a.back(),void 0}if(this.courseId===this.site.getSiteHomeId()&&(this.courseId=void 0),this.courseId&&"participants"===this.route.snapshot.data.swipeManagerSource){const e=f.a.getRouteParam("search"),i=P.a.getOrCreateSource(p.a,[this.courseId,e]);this.users=new profile_page_CoreUserSwipeItemsManager(i),this.users.start()}try{yield this.fetchUser()}finally{this.userLoaded=!0}}))}fetchUser(){var e;return Object(r.a)(this,void 0,void 0,(function*(){try{const i=yield l.a.getProfile(this.userId,this.courseId);i.address=_.a.formatAddress("",i.city,i.country),this.rolesFormatted="roles"in i?_.a.formatRoleList(i.roles):"",this.user=i,null===(e=this.subscription)||void 0===e||e.unsubscribe();const t=this.courseId?d.b.COURSE:d.b.SITE;if(this.subscription=d.a.getProfileHandlersFor(i,t,this.courseId).subscribe((e=>{this.actionHandlers=[],this.newPageHandlers=[],this.communicationHandlers=[],e.forEach((e=>{switch(e.type){case d.c.TYPE_COMMUNICATION:this.communicationHandlers.push(e.data);break;case d.c.TYPE_ACTION:this.actionHandlers.push(e.data);break;default:this.newPageHandlers.push(e.data)}})),this.isLoadingHandlers=!d.a.areHandlersLoaded(i.id,t,this.courseId)})),!this.fetchSuccess){this.fetchSuccess=!0;try{yield l.a.logView(this.userId,this.courseId,this.user.fullname)}catch(e){this.isDeleted="userdeleted"===(null==e?void 0:e.errorcode)||"wsaccessuserdeleted"===(null==e?void 0:e.errorcode),this.isSuspended="wsaccessusersuspended"===(null==e?void 0:e.errorcode),this.isEnrolled="notenrolledprofile"!==(null==e?void 0:e.errorcode)}}}catch(e){c.a.showErrorModal(e)}}))}refreshUser(e){var i;return Object(r.a)(this,void 0,void 0,(function*(){yield u.a.ignoreErrors(Promise.all([l.a.invalidateUserCache(this.userId),m.a.invalidateUserNavigationOptions(),m.a.invalidateUserAdministrationOptions()])),yield this.fetchUser(),null==e||e.complete(),this.user&&a.b.trigger(l.d,{courseId:this.courseId,userId:this.userId,user:this.user},null===(i=this.site)||void 0===i?void 0:i.getId())}))}openUserDetails(){f.a.navigateToSitePath("user/about",{params:{courseId:this.courseId,userId:this.userId}})}handlerClicked(e,i){if(!this.user)return;i.action(e,this.user,this.courseId?d.b.COURSE:d.b.SITE,this.courseId)}ngOnDestroy(){var e,i;null===(e=this.users)||void 0===e?void 0:e.destroy(),null===(i=this.subscription)||void 0===i||i.unsubscribe(),this.obsProfileRefreshed.off()}}return CoreUserProfilePage.ɵfac=function CoreUserProfilePage_Factory(e){return new(e||CoreUserProfilePage)(h.yc(o.a))},CoreUserProfilePage.ɵcmp=h.sc({type:CoreUserProfilePage,selectors:[["page-core-user-profile"]],decls:18,vars:15,consts:[["slot","start"],[3,"text"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[4,"ngIf"],["icon","far-user",3,"message",4,"ngIf"],[1,"ion-text-center","core-user-profile-maininfo","ion-text-wrap"],[3,"user","userId","linkProfile","checkOnline"],["class","core-user-communication-handlers",4,"ngIf"],["button","","detail","true",1,"ion-text-wrap","core-user-profile-handler",3,"click"],["name","fas-user","slot","start","aria-hidden","true"],[1,"item-heading"],["class","ion-text-center core-loading-handlers",4,"ngIf"],["button","","class","ion-text-wrap","detail","true",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],["name","fas-map-marker-alt"],[1,"core-user-communication-handlers"],["expand","block","size","default",3,"ngClass","hidden","disabled","click",4,"ngFor","ngForOf"],["expand","block","size","default",3,"ngClass","hidden","disabled","click"],["slot","start","aria-hidden","true",3,"name",4,"ngIf"],["slot","start","aria-hidden","true",3,"name"],[1,"ion-text-center","core-loading-handlers"],["button","","detail","true",1,"ion-text-wrap",3,"ngClass","hidden","click"],["slot","end","aria-hidden","true",3,"hidden",4,"ngIf"],["class","sr-only",4,"ngIf"],["slot","end",4,"ngIf"],["slot","end","aria-hidden","true",3,"hidden"],[1,"sr-only"],["slot","end"],["expand","block","fill","outline","size","default",3,"ngClass","hidden","disabled","click",4,"ngFor","ngForOf"],["expand","block","fill","outline","size","default",3,"ngClass","hidden","disabled","click"],["icon","far-user",3,"message"]],template:function CoreUserProfilePage_Template(e,i){1&e&&(h.Ec(0,"ion-header"),h.Ec(1,"ion-toolbar"),h.Ec(2,"ion-buttons",0),h.zc(3,"ion-back-button",1),h.Pc(4,"translate"),h.Dc(),h.Ec(5,"ion-title"),h.Ec(6,"h1"),h.pd(7),h.Dc(),h.Dc(),h.Dc(),h.Dc(),h.Ec(8,"ion-content",2),h.Ec(9,"ion-refresher",3),h.Mc("ionRefresh",(function CoreUserProfilePage_Template_ion_refresher_ionRefresh_9_listener(e){return i.refreshUser(e.target)})),h.zc(10,"ion-refresher-content",4),h.Pc(11,"translate"),h.Dc(),h.Ec(12,"core-loading",5),h.nd(13,CoreUserProfilePage_ion_list_13_Template,20,18,"ion-list",6),h.nd(14,CoreUserProfilePage_core_empty_box_14_Template,2,3,"core-empty-box",7),h.nd(15,CoreUserProfilePage_core_empty_box_15_Template,2,3,"core-empty-box",7),h.nd(16,CoreUserProfilePage_core_empty_box_16_Template,2,3,"core-empty-box",7),h.nd(17,CoreUserProfilePage_core_empty_box_17_Template,2,3,"core-empty-box",7),h.Dc(),h.Dc()),2&e&&(h.lc(3),h.Vc("text",h.Qc(4,11,"core.back")),h.lc(4),h.qd(null==i.user?null:i.user.fullname),h.lc(1),h.Vc("core-swipe-navigation",i.users),h.lc(1),h.Vc("disabled",!i.userLoaded),h.lc(1),h.Wc("pullingText",h.Qc(11,13,"core.pulltorefresh")),h.lc(2),h.Vc("hideUntil",i.userLoaded),h.lc(1),h.Vc("ngIf",i.user&&!i.isDeleted&&i.isEnrolled),h.lc(1),h.Vc("ngIf",!i.user&&!i.isDeleted&&i.isEnrolled),h.lc(1),h.Vc("ngIf",i.isDeleted),h.lc(1),h.Vc("ngIf",i.isSuspended),h.lc(1),h.Vc("ngIf",!i.isEnrolled))},directives:[b.C,b.Ab,b.m,b.h,b.i,b.yb,C.a,b.v,v.a,b.bb,b.cb,I.a,U.t,b.P,b.I,T.a,b.O,b.D,y.a,U.s,O.a,b.l,U.q,b.qb,b.k,E.a],pipes:[x.d,D.a],styles:["[_nghost-%COMP%]   .core-user-profile-maininfo[_ngcontent-%COMP%]::part(native){flex-direction:column}[_nghost-%COMP%]     core-user-avatar{display:block;--core-avatar-size:var(--core-large-avatar-size);height:calc(var(--core-avatar-size) + 16px)}[_nghost-%COMP%]     core-user-avatar img{margin:8px auto}[_nghost-%COMP%]     core-user-avatar .contact-status{width:24px!important;height:24px!important;right:calc(50% - 12px - var(--core-avatar-size) / 2)!important}[dir=rtl][_nghost-%COMP%]     core-user-avatar .edit-avatar, [dir=rtl]   [_nghost-%COMP%]     core-user-avatar .edit-avatar{left:-24px;right:unset}"]}),CoreUserProfilePage})();class profile_page_CoreUserSwipeItemsManager extends g.a{getSelectedItemPathFromRoute(e){return e.params.userId}}const V=[{path:"",component:k}];let w=(()=>{class CoreUserProfilePageModule{}return CoreUserProfilePageModule.ɵmod=h.wc({type:CoreUserProfilePageModule}),CoreUserProfilePageModule.ɵinj=h.vc({factory:function CoreUserProfilePageModule_Factory(e){return new(e||CoreUserProfilePageModule)},imports:[[o.m.forChild(V),n.a],o.m]}),CoreUserProfilePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&h.kd(w,{declarations:[k],imports:[o.m,n.a],exports:[o.m]}))},eoiU:function(e,i,t){"use strict";t.d(i,"a",(function(){return CoreSwipeNavigationItemsManager}));var o=t("mrSG"),n=t("pHTc"),r=t("CtbY");class CoreSwipeNavigationItemsManager extends r.a{start(){return Object(o.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return n.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const i=[];for(;e&&(i.push(...e.url),e.firstChild);)e=e.firstChild;return i.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,i){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.getItemBy(e);t&&(yield this.navigateToItem(t,{animationDirection:i,replace:!0}))}))}getItemBy(e){var i;return Object(o.a)(this,void 0,void 0,(function*(){const t=this.getSource().getItems(),o=null!==(i=this.selectedItem&&(null==t?void 0:t.indexOf(this.selectedItem)))&&void 0!==i?i:-1;if(-1===o||null===t)return null;const n=e>0?1:-1;let r=o,s=0;for(;s!==e;){if(r+=n,r<0)return null;if(r>=t.length)break;this.skipItemInSwipe(t[r])||(s+=n)}return s===e?t[r]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}}}]);