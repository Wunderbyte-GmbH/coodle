(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"g77/":function(e,o,s){"use strict";s.r(o),s.d(o,"CoreCoursesMyCoursesPageModule",(function(){return T}));var r=s("tyNb"),t=s("L3Fv"),a=s("5p9q"),c=s("mrSG"),n=s("fDR4"),i=s("FYaz"),l=s("mSZx"),d=s("6akD"),u=s("OYIH"),C=s("YyYz"),b=s("9+EE"),g=s("3LXp"),m=s("bFG1"),h=s("fjkH"),_=s("Xzvb"),v=s("fXoL"),y=s("TEn/"),f=s("hMzs"),p=s("C1x5"),k=s("nt/U"),P=s("PgjG"),M=s("ofXK"),w=s("ACYt"),D=s("3CSS"),B=s("aSim"),O=s("r8G5"),I=s("sYmb");function CoreCoursesMyCoursesPage_div_22_ion_button_1_Template(e,o){if(1&e){const e=v.Fc();v.Ec(0,"ion-button",19),v.Mc("click",(function CoreCoursesMyCoursesPage_div_22_ion_button_1_Template_ion_button_click_0_listener(){v.fd(e);return v.Oc(2).myOverviewBlock.prefetchCourses()})),v.Pc(1,"translate"),v.zc(2,"ion-icon",20),v.Dc()}if(2&e){const e=v.Oc(2);v.mc("aria-label",v.Qc(1,2,e.myOverviewBlock.prefetchCoursesData.statusTranslatable)),v.lc(2),v.Vc("name",e.myOverviewBlock.prefetchCoursesData.icon)}}function CoreCoursesMyCoursesPage_div_22_ion_badge_2_Template(e,o){if(1&e&&(v.Ec(0,"ion-badge",21),v.pd(1),v.Dc()),2&e){const e=v.Oc(2);v.mc("aria-valuemax",e.myOverviewBlock.prefetchCoursesData.total)("aria-valuenow",e.myOverviewBlock.prefetchCoursesData.count)("aria-valuetext",e.myOverviewBlock.prefetchCoursesData.badgeA11yText),v.lc(1),v.rd(" ",e.myOverviewBlock.prefetchCoursesData.badge," ")}}function CoreCoursesMyCoursesPage_div_22_ion_spinner_3_Template(e,o){1&e&&(v.zc(0,"ion-spinner"),v.Pc(1,"translate")),2&e&&v.mc("aria-label",v.Qc(1,1,"core.loading"))}function CoreCoursesMyCoursesPage_div_22_Template(e,o){if(1&e&&(v.Ec(0,"div",15),v.nd(1,CoreCoursesMyCoursesPage_div_22_ion_button_1_Template,3,4,"ion-button",16),v.nd(2,CoreCoursesMyCoursesPage_div_22_ion_badge_2_Template,2,4,"ion-badge",17),v.nd(3,CoreCoursesMyCoursesPage_div_22_ion_spinner_3_Template,2,3,"ion-spinner",18),v.Dc()),2&e){const e=v.Oc();v.lc(1),v.Vc("ngIf",!e.myOverviewBlock.prefetchCoursesData.loading),v.lc(1),v.Vc("ngIf",e.myOverviewBlock.prefetchCoursesData.badge),v.lc(1),v.Vc("ngIf",e.myOverviewBlock.prefetchCoursesData.loading)}}function CoreCoursesMyCoursesPage_core_block_24_Template(e,o){if(1&e&&v.zc(0,"core-block",22),2&e){const e=v.Oc();v.Vc("block",e.loadedBlock)("instanceId",e.userId)}}function CoreCoursesMyCoursesPage_core_block_side_blocks_button_25_Template(e,o){if(1&e&&v.zc(0,"core-block-side-blocks-button",23),2&e){const e=v.Oc();v.Vc("instanceId",e.userId)("myDashboardPage",e.myPageCourses)}}function CoreCoursesMyCoursesPage_core_empty_box_26_Template(e,o){1&e&&(v.zc(0,"core-empty-box",24),v.Pc(1,"translate")),2&e&&v.Vc("message",v.Qc(1,1,"core.course.nocontentavailable"))}let E=(()=>{class CoreCoursesMyCoursesPage{constructor(e){this.loadsManager=e,this.siteName="",this.downloadCoursesEnabled=!1,this.loaded=!1,this.myPageCourses=u.b.MY_PAGE_COURSES,this.hasSideBlocks=!1,this.onReadyPromise=new i.a,this.updateSiteObserver=h.b.on(h.b.SITE_UPDATED,(()=>{this.downloadCoursesEnabled=!_.a.isDownloadCoursesDisabledInSite(),this.loadSiteName()}),b.b.getCurrentSiteId()),this.userId=b.b.getCurrentSiteUserId(),this.loadsManagerSubscription=this.loadsManager.onRefreshPage.subscribe((()=>{this.loaded=!1,this.loadContent()}))}ngOnInit(){this.downloadCoursesEnabled=!_.a.isDownloadCoursesDisabledInSite();(new C.a).treatLink(),this.loadSiteName(),this.loadContent(!0)}loadContent(e=!1){var o,s,r;return Object(c.a)(this,void 0,void 0,(function*(){const t=this.loadsManager.startPageLoad(this,!!e),a=yield u.a.isAvailable(),c=yield _.a.isMyCoursesDisabled(),n=!!(null===(o=b.b.getCurrentSite())||void 0===o?void 0:o.isVersionGreaterEqualThan("4.0"));if(a&&!c)try{const e=yield t.watchRequest(u.a.getDashboardBlocksObservable({myPage:n?this.myPageCourses:void 0,readingStrategy:t.getReadingStrategy()}));this.loadedBlock=e.mainBlocks.concat(e.sideBlocks).find((e=>"myoverview"==e.name)),this.hasSideBlocks=n&&d.a.hasSupportedBlock(e.sideBlocks),yield m.a.nextTicks(2),this.myOverviewBlock=null===(r=null===(s=this.block)||void 0===s?void 0:s.dynamicComponent)||void 0===r?void 0:r.instance,this.loadedBlock||n||this.loadFallbackBlock()}catch(e){g.a.showErrorModal(e),this.loadFallbackBlock()}else a?this.loadedBlock=void 0:this.loadFallbackBlock();this.loaded=!0,this.onReadyPromise.resolve()}))}loadSiteName(){this.siteName=b.b.getRequiredCurrentSite().getSiteName()||""}loadFallbackBlock(){this.loadedBlock={name:"myoverview",visible:!0}}refresh(e){return Object(c.a)(this,void 0,void 0,(function*(){const o=[];o.push(u.a.invalidateDashboardBlocks(u.b.MY_PAGE_COURSES)),this.myOverviewBlock&&o.push(m.a.ignoreErrors(this.myOverviewBlock.invalidateContent())),Promise.all(o).finally((()=>{this.loadContent().finally((()=>{null==e?void 0:e.complete()}))}))}))}ngOnDestroy(){var e;null===(e=this.updateSiteObserver)||void 0===e?void 0:e.off(),this.loadsManagerSubscription.unsubscribe()}ready(){return Object(c.a)(this,void 0,void 0,(function*(){return yield this.onReadyPromise}))}}return CoreCoursesMyCoursesPage.ɵfac=function CoreCoursesMyCoursesPage_Factory(e){return new(e||CoreCoursesMyCoursesPage)(v.yc(n.a))},CoreCoursesMyCoursesPage.ɵcmp=v.sc({type:CoreCoursesMyCoursesPage,selectors:[["page-core-courses-my"]],viewQuery:function CoreCoursesMyCoursesPage_Query(e,o){var s;(1&e&&v.ud(l.a,!0),2&e)&&(v.dd(s=v.Nc())&&(o.block=s.first))},features:[v.kc([{provide:n.a,useClass:n.a}])],decls:27,vars:18,consts:[["slot","start"],[3,"text"],["contextLevel","system",1,"core-header-sitename",3,"text","contextInstanceId"],["src","assets/img/top_logo.png",1,"core-header-logo",3,"alt"],["slot","end"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-text-wrap","divider"],["id","core-courses-my-title",1,"big"],["slot","end",1,"flex-row"],["class","core-button-spinner",4,"ngIf"],["contextLevel","user","labelledBy","core-courses-my-title",3,"block","instanceId",4,"ngIf"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage",4,"ngIf"],["icon","fas-cubes",3,"message",4,"ngIf"],[1,"core-button-spinner"],["fill","clear",3,"click",4,"ngIf"],["class","core-course-download-courses-progress","role","progressbar",4,"ngIf"],[4,"ngIf"],["fill","clear",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["role","progressbar",1,"core-course-download-courses-progress"],["contextLevel","user","labelledBy","core-courses-my-title",3,"block","instanceId"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage"],["icon","fas-cubes",3,"message"]],template:function CoreCoursesMyCoursesPage_Template(e,o){1&e&&(v.Ec(0,"ion-header"),v.Ec(1,"ion-toolbar"),v.Ec(2,"ion-buttons",0),v.zc(3,"ion-back-button",1),v.Pc(4,"translate"),v.Dc(),v.Ec(5,"ion-title"),v.Ec(6,"h1"),v.zc(7,"core-format-text",2),v.zc(8,"img",3),v.Dc(),v.Dc(),v.Ec(9,"ion-buttons",4),v.zc(10,"core-user-menu-button"),v.Dc(),v.Dc(),v.Dc(),v.Ec(11,"ion-content"),v.Ec(12,"ion-refresher",5),v.Mc("ionRefresh",(function CoreCoursesMyCoursesPage_Template_ion_refresher_ionRefresh_12_listener(e){return o.refresh(e.target)})),v.zc(13,"ion-refresher-content",6),v.Pc(14,"translate"),v.Dc(),v.Ec(15,"core-loading",7),v.Ec(16,"ion-item",8),v.Ec(17,"ion-label"),v.Ec(18,"h2",9),v.pd(19),v.Pc(20,"translate"),v.Dc(),v.Dc(),v.Ec(21,"div",10),v.nd(22,CoreCoursesMyCoursesPage_div_22_Template,4,3,"div",11),v.Dc(),v.Dc(),v.Ec(23,"ion-list"),v.nd(24,CoreCoursesMyCoursesPage_core_block_24_Template,1,2,"core-block",12),v.Dc(),v.nd(25,CoreCoursesMyCoursesPage_core_block_side_blocks_button_25_Template,1,2,"core-block-side-blocks-button",13),v.nd(26,CoreCoursesMyCoursesPage_core_empty_box_26_Template,2,3,"core-empty-box",14),v.Dc(),v.Dc()),2&e&&(v.lc(3),v.Vc("text",v.Qc(4,12,"core.back")),v.lc(4),v.Vc("text",o.siteName)("contextInstanceId",0),v.lc(1),v.Vc("alt",o.siteName),v.lc(4),v.Vc("disabled",!o.loaded),v.lc(1),v.Wc("pullingText",v.Qc(14,14,"core.pulltorefresh")),v.lc(2),v.Vc("hideUntil",o.loaded),v.lc(4),v.qd(v.Qc(20,16,"core.courses.mycourses")),v.lc(3),v.Vc("ngIf",o.downloadCoursesEnabled&&o.myOverviewBlock&&o.myOverviewBlock.filteredCourses.length>0),v.lc(2),v.Vc("ngIf",null==o.loadedBlock?null:o.loadedBlock.visible),v.lc(1),v.Vc("ngIf",o.hasSideBlocks),v.lc(1),v.Vc("ngIf",!o.loadedBlock))},directives:[y.C,y.Ab,y.m,y.h,y.i,y.yb,f.a,p.a,k.a,y.v,y.bb,y.cb,P.a,y.I,y.O,M.t,y.P,w.a,y.l,y.D,D.a,y.k,y.qb,l.a,B.a,O.a],pipes:[I.d],styles:["[_nghost-%COMP%]     ion-item-divider{display:none!important}[_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height:calc(100vh - var(--core-header-toolbar-height))}ion-tabs.placement-bottom[_nghost-%COMP%]     core-loading, ion-tabs.placement-bottom   [_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height:calc(100vh - var(--core-header-toolbar-height) - var(--bottom-tabs-size) - 2px)}core-block[_ngcontent-%COMP%]     ion-card.addon-block-myoverview{--border-width:0;--background:transparent;margin:0}"]}),CoreCoursesMyCoursesPage})();var x=s("dQ3M");const S=[{path:"",component:E}];let T=(()=>{class CoreCoursesMyCoursesPageModule{}return CoreCoursesMyCoursesPageModule.ɵmod=v.wc({type:CoreCoursesMyCoursesPageModule}),CoreCoursesMyCoursesPageModule.ɵinj=v.vc({factory:function CoreCoursesMyCoursesPageModule_Factory(e){return new(e||CoreCoursesMyCoursesPageModule)},imports:[[r.m.forChild(S),t.a,a.a,x.a],r.m]}),CoreCoursesMyCoursesPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&v.kd(T,{declarations:[E],imports:[r.m,t.a,a.a,x.a],exports:[r.m]}))}}]);