(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{ALyF:function(e,n,t){"use strict";t.r(n),t.d(n,"CoreMainMenuMorePageModule",(function(){return k}));var i=t("fXoL"),o=t("tyNb"),a=t("L3Fv"),c=t("mrSG"),r=t("9+EE"),l=t("bFG1"),s=t("35jd"),d=t("vPQ6"),u=t("fjkH"),m=t("pHTc"),_=t("y9BN"),M=t("vnm2"),g=t("vuGA"),p=t("j3ag"),b=t("YyYz"),f=t("6s78"),h=t("TEn/"),C=t("C1x5"),P=t("nt/U"),v=t("ofXK"),E=t("3CSS"),D=t("iSJP"),I=t("sYmb");function CoreMainMenuMorePage_ion_item_13_Template(e,n){1&e&&(i.Ec(0,"ion-item",10),i.Ec(1,"ion-label"),i.zc(2,"ion-spinner"),i.Pc(3,"translate"),i.Dc(),i.Dc()),2&e&&(i.lc(2),i.mc("aria-label",i.Qc(3,1,"core.loading")))}function CoreMainMenuMorePage_ion_item_14_ion_badge_7_Template(e,n){if(1&e&&(i.Ec(0,"ion-badge",16),i.pd(1),i.Dc()),2&e){const e=i.Oc().$implicit;i.Vc("hidden",e.loading||!e.badge),i.lc(1),i.rd(" ",e.badge," ")}}const _c0=function(e){return{$a:e}};function CoreMainMenuMorePage_ion_item_14_span_8_Template(e,n){if(1&e&&(i.Ec(0,"span",17),i.pd(1),i.Pc(2,"translate"),i.Dc()),2&e){const e=i.Oc().$implicit;i.lc(1),i.rd(" ",i.Rc(2,1,e.badgeA11yText,i.ad(4,_c0,e.badge))," ")}}function CoreMainMenuMorePage_ion_item_14_ion_spinner_9_Template(e,n){1&e&&(i.zc(0,"ion-spinner",2),i.Pc(1,"translate")),2&e&&i.mc("aria-label",i.Qc(1,1,"core.loading"))}const _c1=function(e){return["core-moremenu-handler",e]};function CoreMainMenuMorePage_ion_item_14_Template(e,n){if(1&e){const e=i.Fc();i.Ec(0,"ion-item",11),i.Mc("click",(function CoreMainMenuMorePage_ion_item_14_Template_ion_item_click_0_listener(){i.fd(e);const t=n.$implicit;return i.Oc().openHandler(t)})),i.Pc(1,"translate"),i.zc(2,"ion-icon",12),i.Ec(3,"ion-label"),i.Ec(4,"p",9),i.pd(5),i.Pc(6,"translate"),i.Dc(),i.Dc(),i.nd(7,CoreMainMenuMorePage_ion_item_14_ion_badge_7_Template,2,2,"ion-badge",13),i.nd(8,CoreMainMenuMorePage_ion_item_14_span_8_Template,3,6,"span",14),i.nd(9,CoreMainMenuMorePage_ion_item_14_ion_spinner_9_Template,2,3,"ion-spinner",15),i.Dc()}if(2&e){const e=n.$implicit;i.Vc("ngClass",i.ad(11,_c1,e.class||"")),i.mc("aria-label",i.Qc(1,7,e.title)),i.lc(2),i.Vc("name",e.icon),i.lc(3),i.qd(i.Qc(6,9,e.title)),i.lc(2),i.Vc("ngIf",e.showBadge),i.lc(1),i.Vc("ngIf",e.showBadge&&e.badge&&e.badgeA11yText),i.lc(1),i.Vc("ngIf",e.showBadge&&e.loading)}}function CoreMainMenuMorePage_ng_container_15_ion_item_1_Template(e,n){if(1&e&&(i.Ec(0,"ion-item",20),i.zc(1,"ion-icon",12),i.Ec(2,"ion-label"),i.Ec(3,"p",9),i.pd(4),i.Dc(),i.Dc(),i.Dc()),2&e){const e=i.Oc().$implicit;i.Vc("href",e.url)("capture","app"==e.type)("inApp","inappbrowser"==e.type)("detailIcon","browser"==e.type?"open-outline":"chevron-forward"),i.mc("aria-label",e.label),i.lc(1),i.Vc("name",e.icon),i.lc(3),i.qd(e.label)}}function CoreMainMenuMorePage_ng_container_15_ion_item_2_Template(e,n){if(1&e){const e=i.Fc();i.Ec(0,"ion-item",21),i.Mc("click",(function CoreMainMenuMorePage_ng_container_15_ion_item_2_Template_ion_item_click_0_listener(){i.fd(e);const n=i.Oc().$implicit;return i.Oc().openItem(n)})),i.zc(1,"ion-icon",12),i.Ec(2,"ion-label"),i.Ec(3,"p",9),i.pd(4),i.Dc(),i.Dc(),i.Dc()}if(2&e){const e=i.Oc().$implicit;i.mc("aria-label",e.label),i.lc(1),i.Vc("name",e.icon),i.lc(3),i.qd(e.label)}}function CoreMainMenuMorePage_ng_container_15_Template(e,n){if(1&e&&(i.Cc(0),i.nd(1,CoreMainMenuMorePage_ng_container_15_ion_item_1_Template,5,7,"ion-item",18),i.nd(2,CoreMainMenuMorePage_ng_container_15_ion_item_2_Template,5,3,"ion-item",19),i.Bc()),2&e){const e=n.$implicit;i.lc(1),i.Vc("ngIf","embedded"!=e.type),i.lc(1),i.Vc("ngIf","embedded"==e.type)}}function CoreMainMenuMorePage_ion_item_16_Template(e,n){if(1&e){const e=i.Fc();i.Ec(0,"ion-item",7),i.Mc("click",(function CoreMainMenuMorePage_ion_item_16_Template_ion_item_click_0_listener(){i.fd(e);return i.Oc().scanQR()})),i.zc(1,"ion-icon",22),i.Ec(2,"ion-label"),i.Ec(3,"p",9),i.pd(4),i.Pc(5,"translate"),i.Dc(),i.Dc(),i.Dc()}2&e&&(i.lc(4),i.qd(i.Qc(5,1,"core.scanqr")))}let T=(()=>{class CoreMainMenuMorePage{constructor(){var e;this.handlersLoaded=!1,this.langObserver=u.b.on(u.b.LANGUAGE_CHANGED,(()=>this.loadCustomMenuItems())),this.updateSiteObserver=u.b.on(u.b.SITE_UPDATED,(()=>Object(c.a)(this,void 0,void 0,(function*(){this.customItems=yield d.a.getCustomMenuItems()}))),r.b.getCurrentSiteId()),this.loadCustomMenuItems(),this.showScanQR=l.a.canScanQR()&&!(null===(e=r.b.getCurrentSite())||void 0===e?void 0:e.isFeatureDisabled("CoreMainMenuDelegate_QrReader"))}ngOnInit(){this.subscription=s.a.getHandlersObservable().subscribe((e=>{this.allHandlers=e,this.initHandlers()})),this.resizeListener=f.a.onWindowResize((()=>{this.initHandlers()}));(new b.a).treatLink()}ngOnDestroy(){var e,n,t,i;null===(e=this.langObserver)||void 0===e?void 0:e.off(),null===(n=this.updateSiteObserver)||void 0===n||n.off(),null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(i=this.resizeListener)||void 0===i||i.off()}initHandlers(){if(!this.allHandlers)return;const e=this.allHandlers.filter((e=>!e.onlyInMore)).slice(0,d.a.getNumItems());this.handlers=this.allHandlers.filter((n=>-1==e.indexOf(n))),this.handlersLoaded=s.a.areHandlersLoaded()}loadCustomMenuItems(){return Object(c.a)(this,void 0,void 0,(function*(){this.customItems=yield d.a.getCustomMenuItems()}))}openHandler(e){const n=e.pageParams;console.log("handler call",e,n),m.a.navigateToSitePath(e.page,{params:n})}openItem(e){m.a.navigateToSitePath("viewer/iframe",{params:{title:e.label,url:e.url}})}openSettings(){m.a.navigateToSitePath("settings")}scanQR(){var e;return Object(c.a)(this,void 0,void 0,(function*(){const n=yield l.a.scanQR();if(n)if(_.a.isCustomURL(n))_.a.handleCustomURL(n).catch((e=>{_.a.treatHandleCustomURLError(e)}));else if(/^[^:]{2,}:\/\/[^ ]+$/i.test(n)){(yield M.a.handleLink(n,void 0,!0,!0))||(null===(e=r.b.getCurrentSite())||void 0===e?void 0:e.openInBrowserWithAutoLogin(n))}else g.a.viewText(p.I.instant("core.qrscanner"),n,{displayCopyButton:!0})}))}}return CoreMainMenuMorePage.ɵfac=function CoreMainMenuMorePage_Factory(e){return new(e||CoreMainMenuMorePage)},CoreMainMenuMorePage.ɵcmp=i.sc({type:CoreMainMenuMorePage,selectors:[["page-core-mainmenu-more"]],decls:25,vars:16,consts:[["slot","start"],[3,"text"],["slot","end"],["class","ion-text-center",4,"ngIf"],["button","","detail","true",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["button","","detail","true",3,"click",4,"ngIf"],["button","","detail","true",3,"click"],["name","fas-cogs","slot","start","aria-hidden","true"],[1,"item-heading"],[1,"ion-text-center"],["button","","detail","true",3,"ngClass","click"],["slot","start","aria-hidden","true",3,"name"],["slot","end","aria-hidden","true",3,"hidden",4,"ngIf"],["class","sr-only",4,"ngIf"],["slot","end",4,"ngIf"],["slot","end","aria-hidden","true",3,"hidden"],[1,"sr-only"],["button","","core-link","","class","core-moremenu-customitem","detail","true",3,"href","capture","inApp","detailIcon",4,"ngIf"],["button","","class","core-moremenu-customitem","detail","true",3,"click",4,"ngIf"],["button","","core-link","","detail","true",1,"core-moremenu-customitem",3,"href","capture","inApp","detailIcon"],["button","","detail","true",1,"core-moremenu-customitem",3,"click"],["name","fas-qrcode","slot","start","aria-hidden","true"]],template:function CoreMainMenuMorePage_Template(e,n){1&e&&(i.Ec(0,"ion-header"),i.Ec(1,"ion-toolbar"),i.Ec(2,"ion-buttons",0),i.zc(3,"ion-back-button",1),i.Pc(4,"translate"),i.Dc(),i.Ec(5,"ion-title"),i.Ec(6,"h1"),i.pd(7),i.Pc(8,"translate"),i.Dc(),i.Dc(),i.Ec(9,"ion-buttons",2),i.zc(10,"core-user-menu-button"),i.Dc(),i.Dc(),i.Dc(),i.Ec(11,"ion-content"),i.Ec(12,"ion-list"),i.nd(13,CoreMainMenuMorePage_ion_item_13_Template,4,3,"ion-item",3),i.nd(14,CoreMainMenuMorePage_ion_item_14_Template,10,13,"ion-item",4),i.nd(15,CoreMainMenuMorePage_ng_container_15_Template,3,2,"ng-container",5),i.nd(16,CoreMainMenuMorePage_ion_item_16_Template,6,3,"ion-item",6),i.Dc(),i.Dc(),i.Ec(17,"ion-footer"),i.Ec(18,"ion-item",7),i.Mc("click",(function CoreMainMenuMorePage_Template_ion_item_click_18_listener(){return n.openSettings()})),i.Pc(19,"translate"),i.zc(20,"ion-icon",8),i.Ec(21,"ion-label"),i.Ec(22,"p",9),i.pd(23),i.Pc(24,"translate"),i.Dc(),i.Dc(),i.Dc(),i.Dc()),2&e&&(i.lc(3),i.Vc("text",i.Qc(4,8,"core.back")),i.lc(4),i.qd(i.Qc(8,10,"core.more")),i.lc(6),i.Vc("ngIf",!(n.handlers&&n.handlers.length||n.handlersLoaded)),i.lc(1),i.Vc("ngForOf",n.handlers),i.lc(1),i.Vc("ngForOf",n.customItems),i.lc(1),i.Vc("ngIf",n.showScanQR),i.lc(2),i.mc("aria-label",i.Qc(19,12,"core.settings.appsettings")),i.lc(5),i.qd(i.Qc(24,14,"core.settings.appsettings")))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,C.a,P.a,h.v,h.P,v.t,v.s,h.A,h.I,h.D,E.a,h.O,h.qb,v.q,h.k,D.a],pipes:[I.d],styles:["ion-item[_ngcontent-%COMP%]{--border-color:var(--core-more-item-border,var(--ion-border-color))}ion-item[_ngcontent-%COMP%] > ion-icon[slot][_ngcontent-%COMP%]{color:var(--core-more-icon)!important}"]}),CoreMainMenuMorePage})();var y=t("wG2S"),O=t("dQ3M");let k=(()=>{class CoreMainMenuMorePageModule{}return CoreMainMenuMorePageModule.ɵmod=i.wc({type:CoreMainMenuMorePageModule}),CoreMainMenuMorePageModule.ɵinj=i.vc({factory:function CoreMainMenuMorePageModule_Factory(e){return new(e||CoreMainMenuMorePageModule)},providers:[{provide:o.g,multi:!0,deps:[i.x],useFactory:e=>Object(y.b)(e,{component:T,data:{mainMenuTabRoot:d.b.MORE_PAGE_NAME}})}],imports:[[a.a,O.a],o.m]}),CoreMainMenuMorePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&i.kd(k,{declarations:[T],imports:[a.a,O.a],exports:[o.m]}))}}]);