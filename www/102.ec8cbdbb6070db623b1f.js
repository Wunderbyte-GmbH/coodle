(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{KVTe:function(e,o,t){"use strict";t.r(o),t.d(o,"CoreLoginLazyModule",(function(){return R}));var r=t("tyNb"),a=t("L3Fv"),n=t("mrSG"),i=t("9+EE"),s=t("bFG1"),c=t("j3ag"),d=t("mv9v"),l=t("fXoL");let u=(()=>{class CoreLoginHasSitesGuard{canActivate(){return this.guard()}canLoad(){return this.guard()}guard(){return Object(n.a)(this,void 0,void 0,(function*(){if((yield s.a.ignoreErrors(i.b.getSites(),[])).length>0)return!0;const[e,o]=d.a.getAddSiteRouteInfo(),t=c.D.parseUrl(e);return t.queryParams=o,t}))}}return CoreLoginHasSitesGuard.ɵfac=function CoreLoginHasSitesGuard_Factory(e){return new(e||CoreLoginHasSitesGuard)},CoreLoginHasSitesGuard.ɵprov=l.uc({token:CoreLoginHasSitesGuard,factory:CoreLoginHasSitesGuard.ɵfac,providedIn:"root"}),CoreLoginHasSitesGuard})();var g=t("ho2i"),p=t("3Pt+"),m=t("3LXp"),h=t("pHTc"),f=t("4reR"),w=t("r2Z7"),P=t("H8uD"),C=t("TEn/"),L=t("nt/U"),b=t("ofXK"),y=t("6uVz"),v=t("ACYt"),E=t("uI1u"),F=t("sYmb");const D=["resetPasswordForm"];function CoreLoginForgottenPasswordPage_core_login_exceeded_attempts_11_Template(e,o){if(1&e&&(l.Ec(0,"core-login-exceeded-attempts",14),l.Pc(1,"translate"),l.pd(2),l.Pc(3,"translate"),l.Dc()),2&e){const e=l.Oc();l.Vc("supportConfig",e.supportConfig)("supportSubject",l.Qc(1,3,"core.login.exceededpasswordresetattemptssupportsubject")),l.lc(2),l.rd(" ",l.Qc(3,5,"core.login.exceededpasswordresetattempts")," ")}}let M=(()=>{class CoreLoginForgottenPasswordPage{constructor(e){this.formBuilder=e,this.wasPasswordResetRequestedRecently=!1}ngOnInit(){var e;return Object(n.a)(this,void 0,void 0,(function*(){const o=h.a.getRouteParam("siteUrl");if(!o)return m.a.showErrorModal("Site URL not supplied."),h.a.back(),void 0;const t=h.a.getRouteParam("siteConfig");this.siteUrl=o,this.autoFocus=w.a.is("tablet"),this.myForm=this.formBuilder.group({field:["username",p.F.required],value:[h.a.getRouteParam("username")||"",p.F.required]}),this.supportConfig=t&&new P.a(t),this.canContactSupport=null===(e=this.supportConfig)||void 0===e?void 0:e.canContactSupport(),this.wasPasswordResetRequestedRecently=yield d.a.wasPasswordResetRequestedRecently(o)}))}resetPassword(e){return Object(n.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const o=this.myForm.value.field,t=this.myForm.value.value;if(!t)return m.a.showErrorModal("core.login.usernameoremail",!0),void 0;const r=yield m.a.showModalLoading("core.sending",!0),a="email"==o;try{const e=yield d.a.requestPasswordReset(this.siteUrl,a?"":t,a?t:"");"dataerror"==e.status?this.showError(a,e.warnings):"emailpasswordconfirmnotsent"==e.status||"emailpasswordconfirmnoemail"==e.status?m.a.showErrorModal(e.notice):(f.a.triggerFormSubmittedEvent(this.formElement,!0),yield m.a.showAlert(c.I.instant("core.success"),e.notice),yield h.a.back(),yield d.a.passwordResetRequested(this.siteUrl))}catch(e){m.a.showErrorModal(e)}finally{r.dismiss()}}))}showError(e,o){for(let t=0;t<o.length;t++){const r=o[t];if("email"==r.item&&e||"username"==r.item&&!e){m.a.showErrorModal(r.message);break}}}}return CoreLoginForgottenPasswordPage.ɵfac=function CoreLoginForgottenPasswordPage_Factory(e){return new(e||CoreLoginForgottenPasswordPage)(l.yc(p.f))},CoreLoginForgottenPasswordPage.ɵcmp=l.sc({type:CoreLoginForgottenPasswordPage,selectors:[["page-core-login-forgotten-password"]],viewQuery:function CoreLoginForgottenPasswordPage_Query(e,o){var t;(1&e&&l.ud(D,!0),2&e)&&(l.dd(t=l.Nc())&&(o.formElement=t.first))},decls:45,vars:31,consts:[["slot","start"],[3,"text"],[1,"list-item-limited-width"],[3,"supportConfig","supportSubject",4,"ngIf"],[1,"ion-text-wrap"],[3,"formGroup","ngSubmit"],["resetPasswordForm",""],[1,"item-heading"],["formControlName","field"],["slot","end","value","username"],["slot","end","value","email"],[1,"sr-only"],["type","text","name","value","formControlName","value","autocapitalize","none","autocorrect","off",3,"placeholder","core-auto-focus"],["type","submit","expand","block",1,"ion-margin",3,"disabled"],[3,"supportConfig","supportSubject"]],template:function CoreLoginForgottenPasswordPage_Template(e,o){1&e&&(l.Ec(0,"ion-header"),l.Ec(1,"ion-toolbar"),l.Ec(2,"ion-buttons",0),l.zc(3,"ion-back-button",1),l.Pc(4,"translate"),l.Dc(),l.Ec(5,"ion-title"),l.Ec(6,"h1"),l.pd(7),l.Pc(8,"translate"),l.Dc(),l.Dc(),l.Dc(),l.Dc(),l.Ec(9,"ion-content"),l.Ec(10,"div",2),l.nd(11,CoreLoginForgottenPasswordPage_core_login_exceeded_attempts_11_Template,4,7,"core-login-exceeded-attempts",3),l.Ec(12,"ion-list"),l.Ec(13,"ion-item",4),l.Ec(14,"ion-label"),l.pd(15),l.Pc(16,"translate"),l.Dc(),l.Dc(),l.Dc(),l.Ec(17,"ion-card"),l.Ec(18,"form",5,6),l.Mc("ngSubmit",(function CoreLoginForgottenPasswordPage_Template_form_ngSubmit_18_listener(e){return o.resetPassword(e)})),l.Ec(20,"ion-item-divider",4),l.Ec(21,"ion-label"),l.Ec(22,"p",7),l.pd(23),l.Pc(24,"translate"),l.Dc(),l.Dc(),l.Dc(),l.Ec(25,"ion-radio-group",8),l.Ec(26,"ion-item"),l.Ec(27,"ion-label"),l.pd(28),l.Pc(29,"translate"),l.Dc(),l.zc(30,"ion-radio",9),l.Dc(),l.Ec(31,"ion-item"),l.Ec(32,"ion-label"),l.pd(33),l.Pc(34,"translate"),l.Dc(),l.zc(35,"ion-radio",10),l.Dc(),l.Dc(),l.Ec(36,"ion-item"),l.Ec(37,"ion-label",11),l.pd(38),l.Pc(39,"translate"),l.Dc(),l.zc(40,"ion-input",12),l.Pc(41,"translate"),l.Dc(),l.Ec(42,"ion-button",13),l.pd(43),l.Pc(44,"translate"),l.Dc(),l.Dc(),l.Dc(),l.Dc(),l.Dc()),2&e&&(l.lc(3),l.Vc("text",l.Qc(4,13,"core.back")),l.lc(4),l.qd(l.Qc(8,15,"core.login.passwordforgotten")),l.lc(4),l.Vc("ngIf",o.canContactSupport&&o.wasPasswordResetRequestedRecently),l.lc(4),l.qd(l.Qc(16,17,"core.login.passwordforgotteninstructions2")),l.lc(3),l.Vc("formGroup",o.myForm),l.lc(5),l.qd(l.Qc(24,19,"core.login.searchby")),l.lc(5),l.qd(l.Qc(29,21,"core.login.username")),l.lc(5),l.qd(l.Qc(34,23,"core.user.email")),l.lc(5),l.qd(l.Qc(39,25,"core.login.usernameoremail")),l.lc(2),l.Wc("placeholder",l.Qc(41,27,"core.login.usernameoremail")),l.Vc("core-auto-focus",o.autoFocus),l.lc(2),l.Vc("disabled",!o.myForm.valid),l.lc(1),l.rd(" ",l.Qc(44,29,"core.courses.search")," "))},directives:[C.C,C.Ab,C.m,C.h,C.i,C.yb,L.a,C.v,b.t,C.P,C.I,C.O,C.n,p.H,p.s,p.k,C.J,C.Z,C.Ob,p.r,p.i,C.Y,C.Mb,C.H,C.Pb,y.a,v.a,C.l,E.a],pipes:[F.d],encapsulation:2}),CoreLoginForgottenPasswordPage})();const S=[{path:"",pathMatch:"full",redirectTo:"sites"},{path:"site",loadChildren:()=>t.e(108).then(t.bind(null,"uFKL")).then((e=>e.CoreLoginSitePageModule))},{path:"credentials",loadChildren:()=>d.a.getCredentialsRouteModule()},{path:"sites",loadChildren:()=>t.e(109).then(t.bind(null,"Pgjy")).then((e=>e.CoreLoginSitesPageModule)),canLoad:[u],canActivate:[u]},{path:"forgottenpassword",component:M},{path:"changepassword",loadChildren:()=>t.e(103).then(t.bind(null,"EOZX")).then((e=>e.CoreLoginChangePasswordPageModule))},{path:"sitepolicy",loadChildren:()=>t.e(107).then(t.bind(null,"HBmr")).then((e=>e.CoreLoginSitePolicyPageModule))},{path:"emailsignup",loadChildren:()=>t.e(105).then(t.bind(null,"dxjp")).then((e=>e.CoreLoginEmailSignupPageModule))},{path:"reconnect",loadChildren:()=>d.a.getReconnectRouteModule()}];let R=(()=>{class CoreLoginLazyModule{}return CoreLoginLazyModule.ɵmod=l.wc({type:CoreLoginLazyModule}),CoreLoginLazyModule.ɵinj=l.vc({factory:function CoreLoginLazyModule_Factory(e){return new(e||CoreLoginLazyModule)},imports:[[a.a,g.a,r.m.forChild(S)]]}),CoreLoginLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&l.kd(R,{declarations:[M],imports:[a.a,g.a,r.m]}))}}]);