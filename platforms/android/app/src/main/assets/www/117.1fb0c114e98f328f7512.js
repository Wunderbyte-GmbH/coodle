(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{"86GQ":function(e,t,n){"use strict";n.r(t),n.d(t,"CoreSettingsGeneralPageModule",(function(){return L}));var i=n("tyNb"),o=n("L3Fv"),a=n("mrSG"),c=n("BaYo"),l=n("BBqZ"),s=n("fjkH"),r=n("Ao69"),g=n("3LXp"),d=n("Afn4"),_=n("1gmh"),p=n("41gC"),h=n("j3ag"),m=n("9+EE"),u=n("bFG1"),C=n("pHTc"),S=n("r2Z7"),f=n("fXoL"),E=n("TEn/"),b=n("nt/U"),D=n("3Pt+"),P=n("ofXK"),y=n("ACYt"),T=n("sYmb");function CoreSettingsGeneralPage_ion_select_option_18_Template(e,t){if(1&e&&(f.Ec(0,"ion-select-option",15),f.pd(1),f.Dc()),2&e){const e=t.$implicit;f.Vc("value",e.code),f.lc(1),f.qd(e.name)}}const _c0=function(e){return{"font-size.px":e}};function CoreSettingsGeneralPage_ion_segment_button_25_Template(e,t){if(1&e){const e=f.Fc();f.Ec(0,"ion-segment-button",16),f.Mc("click",(function CoreSettingsGeneralPage_ion_segment_button_25_Template_ion_segment_button_click_0_listener(n){f.fd(e);const i=t.$implicit;return f.Oc().zoomLevelChanged(n,i.value)})),f.Ec(1,"ion-label"),f.pd(2),f.Pc(3,"translate"),f.zc(4,"span",17),f.Dc(),f.Dc()}if(2&e){const e=t.$implicit,n=f.Oc();f.Vc("value",e.value)("ngStyle",f.ad(6,_c0,e.style)),f.lc(2),f.rd(" ",f.Qc(3,4,"core.settings.fontsizecharacter")," "),f.lc(2),f.Vc("ngStyle",f.ad(8,_c0,n.zoomLevels[n.zoomLevels.length-1].style))}}function CoreSettingsGeneralPage_ion_item_26_p_5_Template(e,t){1&e&&(f.Ec(0,"p",21),f.pd(1),f.Pc(2,"translate"),f.Dc()),2&e&&(f.lc(1),f.qd(f.Qc(2,1,"core.settings.forcedsetting")))}function CoreSettingsGeneralPage_ion_item_26_ion_select_option_8_Template(e,t){if(1&e&&(f.Ec(0,"ion-select-option",15),f.pd(1),f.Pc(2,"translate"),f.Dc()),2&e){const e=t.$implicit;f.Vc("value",e),f.lc(1),f.rd(" ",f.Qc(2,2,"core.settings.colorscheme-"+e),"")}}const _c1=function(e){return{header:e}};function CoreSettingsGeneralPage_ion_item_26_Template(e,t){if(1&e){const e=f.Fc();f.Ec(0,"ion-item",18),f.Ec(1,"ion-label"),f.Ec(2,"p",4),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.nd(5,CoreSettingsGeneralPage_ion_item_26_p_5_Template,3,3,"p",19),f.Dc(),f.Ec(6,"ion-select",20),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_ion_item_26_Template_ion_select_ngModelChange_6_listener(t){f.fd(e);return f.Oc().selectedScheme=t}))("ionChange",(function CoreSettingsGeneralPage_ion_item_26_Template_ion_select_ionChange_6_listener(t){f.fd(e);return f.Oc().colorSchemeChanged(t)})),f.Pc(7,"translate"),f.nd(8,CoreSettingsGeneralPage_ion_item_26_ion_select_option_8_Template,3,4,"ion-select-option",6),f.Dc(),f.Dc()}if(2&e){const e=f.Oc();f.lc(3),f.qd(f.Qc(4,6,"core.settings.colorscheme")),f.lc(2),f.Vc("ngIf",e.colorSchemeDisabled),f.lc(1),f.Vc("ngModel",e.selectedScheme)("disabled",e.colorSchemeDisabled)("interfaceOptions",f.ad(10,_c1,f.Qc(7,8,"core.settings.colorscheme"))),f.lc(2),f.Vc("ngForOf",e.colorSchemes)}}function CoreSettingsGeneralPage_ion_item_27_Template(e,t){1&e&&(f.Ec(0,"ion-item",22),f.Ec(1,"ion-label"),f.Ec(2,"p"),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Dc(),f.Dc()),2&e&&(f.lc(3),f.qd(f.Qc(4,1,"core.settings.colorscheme-system-notice")))}function CoreSettingsGeneralPage_ion_item_37_Template(e,t){if(1&e){const e=f.Fc();f.Ec(0,"ion-item",12),f.Ec(1,"ion-label"),f.Ec(2,"p",4),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"p"),f.pd(6),f.Pc(7,"translate"),f.Dc(),f.Ec(8,"ion-button",23),f.Mc("click",(function CoreSettingsGeneralPage_ion_item_37_Template_ion_button_click_8_listener(t){f.fd(e);return f.Oc().openNativeSettings(t)})),f.pd(9),f.Pc(10,"translate"),f.Dc(),f.Dc(),f.Dc()}2&e&&(f.lc(3),f.qd(f.Qc(4,3,"core.settings.ioscookies")),f.lc(3),f.qd(f.Qc(7,5,"core.settings.ioscookiesdescription")),f.lc(3),f.rd(" ",f.Qc(10,7,"core.opensettings")," "))}function CoreSettingsGeneralPage_ion_item_47_Template(e,t){if(1&e){const e=f.Fc();f.Ec(0,"ion-item",12),f.Ec(1,"ion-label"),f.Ec(2,"p",4),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"p"),f.pd(6),f.Pc(7,"translate"),f.Dc(),f.Dc(),f.Ec(8,"ion-toggle",13),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_ion_item_47_Template_ion_toggle_ngModelChange_8_listener(t){f.fd(e);return f.Oc().analyticsEnabled=t}))("ionChange",(function CoreSettingsGeneralPage_ion_item_47_Template_ion_toggle_ionChange_8_listener(t){f.fd(e);return f.Oc().analyticsEnabledChanged(t)})),f.Dc(),f.Dc()}if(2&e){const e=f.Oc();f.lc(3),f.qd(f.Qc(4,3,"core.settings.enablefirebaseanalytics")),f.lc(3),f.qd(f.Qc(7,5,"core.settings.enablefirebaseanalyticsdescription")),f.lc(2),f.Vc("ngModel",e.analyticsEnabled)}}let G=(()=>{class CoreSettingsGeneralPage{constructor(){this.languages=[],this.selectedLanguage="",this.zoomLevels=[],this.selectedZoomLevel="none",this.richTextEditor=!0,this.debugDisplay=!1,this.analyticsSupported=!1,this.analyticsEnabled=!1,this.colorSchemes=[],this.selectedScheme="light",this.colorSchemeDisabled=!1,this.isAndroid=!1,this.displayIframeHelp=!1,this.asyncInit()}asyncInit(){return Object(a.a)(this,void 0,void 0,(function*(){const e=c.a.CONFIG.languages;for(const t in e)this.languages.push({code:t,name:e[t]});this.languages.sort(((e,t)=>e.name.localeCompare(t.name))),this.selectedLanguage=yield r.a.getCurrentLanguage(),c.a.CONFIG.forceColorScheme||(this.colorSchemeDisabled=_.a.isColorSchemeDisabledInSite(),this.colorSchemeDisabled?(this.colorSchemes.push("light"),this.selectedScheme=this.colorSchemes[0]):(this.isAndroid=S.a.isAndroid(),this.colorSchemes=_.a.getAllowedColorSchemes(),this.selectedScheme=yield l.a.get(c.a.SETTINGS_COLOR_SCHEME,"light"))),this.selectedZoomLevel=yield _.a.getZoomLevel(),this.zoomLevels=Object.keys(c.a.CONFIG.zoomlevels).map((e=>({value:e,style:Math.round(16*c.a.CONFIG.zoomlevels[e]/100),selected:e===this.selectedZoomLevel}))),this.richTextEditor=yield l.a.get(c.a.SETTINGS_RICH_TEXT_EDITOR,!0),this.debugDisplay=yield l.a.get(c.a.SETTINGS_DEBUG_DISPLAY,!1),this.analyticsSupported=c.a.CONFIG.enableanalytics,this.analyticsSupported&&(this.analyticsEnabled=yield l.a.get(c.a.SETTINGS_ANALYTICS_ENABLED,!0)),this.displayIframeHelp=p.a.shouldDisplayHelp()}))}languageChanged(e){var t;return Object(a.a)(this,void 0,void 0,(function*(){e.stopPropagation(),e.preventDefault();const n=yield r.a.getCurrentLanguage();if(this.selectedLanguage===n)return;const i=h.I.instant("core.cancel");try{yield r.a.changeCurrentLanguage(this.selectedLanguage)}finally{const e=null===(t=this.languages.find((e=>e.code==this.selectedLanguage)))||void 0===t?void 0:t.name,o=[{text:i,role:"cancel",handler:()=>{clearTimeout(l),this.selectedLanguage=n,r.a.changeCurrentLanguage(this.selectedLanguage)}},{text:h.I.instant("core.settings.changelanguage",{$a:e}),cssClass:"timed-button",handler:()=>{clearTimeout(l),this.applyLanguageAndRestart()}}],c=yield g.a.showAlertWithOptions({message:h.I.instant("core.settings.changelanguagealert"),buttons:o}),l=window.setTimeout((()=>Object(a.a)(this,void 0,void 0,(function*(){yield c.dismiss(),this.applyLanguageAndRestart()}))),1e4)}}))}applyLanguageAndRestart(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield m.b.getSitesInstances();yield u.a.ignoreErrors(Promise.all(e.map((e=>e.invalidateWsCache())))),s.b.trigger(s.b.LANGUAGE_CHANGED,this.selectedLanguage),C.a.navigate("/reload",{reset:!0})}))}zoomLevelChanged(e,t){e.stopPropagation(),e.preventDefault(),this.selectedZoomLevel=t,this.zoomLevels=this.zoomLevels.map((e=>(e.selected=e.value===this.selectedZoomLevel,e))),_.a.applyZoomLevel(this.selectedZoomLevel),l.a.set(c.a.SETTINGS_ZOOM_LEVEL,this.selectedZoomLevel)}colorSchemeChanged(e){e.stopPropagation(),e.preventDefault(),_.a.setColorScheme(this.selectedScheme),l.a.set(c.a.SETTINGS_COLOR_SCHEME,this.selectedScheme)}richTextEditorChanged(e){e.stopPropagation(),e.preventDefault(),l.a.set(c.a.SETTINGS_RICH_TEXT_EDITOR,this.richTextEditor?1:0)}debugDisplayChanged(e){e.stopPropagation(),e.preventDefault(),l.a.set(c.a.SETTINGS_DEBUG_DISPLAY,this.debugDisplay?1:0),g.a.setDebugDisplay(this.debugDisplay)}analyticsEnabledChanged(e){return Object(a.a)(this,void 0,void 0,(function*(){e.stopPropagation(),e.preventDefault(),yield d.a.enableAnalytics(this.analyticsEnabled),l.a.set(c.a.SETTINGS_ANALYTICS_ENABLED,this.analyticsEnabled?1:0)}))}openNativeSettings(e){e.stopPropagation(),e.preventDefault(),h.j.switchToSettings()}}return CoreSettingsGeneralPage.ɵfac=function CoreSettingsGeneralPage_Factory(e){return new(e||CoreSettingsGeneralPage)},CoreSettingsGeneralPage.ɵcmp=f.sc({type:CoreSettingsGeneralPage,selectors:[["page-core-app-settings-general"]],decls:48,vars:39,consts:[["slot","start"],[3,"text"],[1,"list-item-limited-width"],["lines","none",1,"ion-text-wrap"],[1,"item-heading"],["interface","action-sheet",3,"ngModel","interfaceOptions","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none",1,"ion-text-wrap","core-settings-general-font-size","item-interactive"],["color","primary",3,"ngModel","ngModelChange"],[3,"value","ngStyle","click",4,"ngFor","ngForOf"],["class","ion-text-wrap core-settings-general-color-scheme","lines","none",4,"ngIf"],["text-wrap","","lines","none",4,"ngIf"],[1,"ion-text-wrap"],[3,"ngModel","ngModelChange","ionChange"],["class","ion-text-wrap",4,"ngIf"],[3,"value"],[3,"value","ngStyle","click"],[3,"ngStyle"],["lines","none",1,"ion-text-wrap","core-settings-general-color-scheme"],["class","text-danger",4,"ngIf"],["interface","action-sheet",3,"ngModel","disabled","interfaceOptions","ngModelChange","ionChange"],[1,"text-danger"],["text-wrap","","lines","none"],["expand","block",3,"click"]],template:function CoreSettingsGeneralPage_Template(e,t){1&e&&(f.Ec(0,"ion-header"),f.Ec(1,"ion-toolbar"),f.Ec(2,"ion-buttons",0),f.zc(3,"ion-back-button",1),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"ion-title"),f.Ec(6,"h1"),f.pd(7),f.Pc(8,"translate"),f.Dc(),f.Dc(),f.Dc(),f.Dc(),f.Ec(9,"ion-content"),f.Ec(10,"ion-list",2),f.Ec(11,"ion-item",3),f.Ec(12,"ion-label"),f.Ec(13,"p",4),f.pd(14),f.Pc(15,"translate"),f.Dc(),f.Dc(),f.Ec(16,"ion-select",5),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_select_ngModelChange_16_listener(e){return t.selectedLanguage=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_select_ionChange_16_listener(e){return t.languageChanged(e)})),f.Pc(17,"translate"),f.nd(18,CoreSettingsGeneralPage_ion_select_option_18_Template,2,2,"ion-select-option",6),f.Dc(),f.Dc(),f.Ec(19,"ion-item",7),f.Ec(20,"ion-label"),f.Ec(21,"p",4),f.pd(22),f.Pc(23,"translate"),f.Dc(),f.Dc(),f.Ec(24,"ion-segment",8),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_segment_ngModelChange_24_listener(e){return t.selectedZoomLevel=e})),f.nd(25,CoreSettingsGeneralPage_ion_segment_button_25_Template,5,10,"ion-segment-button",9),f.Dc(),f.Dc(),f.nd(26,CoreSettingsGeneralPage_ion_item_26_Template,9,12,"ion-item",10),f.nd(27,CoreSettingsGeneralPage_ion_item_27_Template,5,3,"ion-item",11),f.Ec(28,"ion-item",12),f.Ec(29,"ion-label"),f.Ec(30,"p",4),f.pd(31),f.Pc(32,"translate"),f.Dc(),f.Ec(33,"p"),f.pd(34),f.Pc(35,"translate"),f.Dc(),f.Dc(),f.Ec(36,"ion-toggle",13),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ngModelChange_36_listener(e){return t.richTextEditor=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ionChange_36_listener(e){return t.richTextEditorChanged(e)})),f.Dc(),f.Dc(),f.nd(37,CoreSettingsGeneralPage_ion_item_37_Template,11,9,"ion-item",14),f.Ec(38,"ion-item",12),f.Ec(39,"ion-label"),f.Ec(40,"p",4),f.pd(41),f.Pc(42,"translate"),f.Dc(),f.Ec(43,"p"),f.pd(44),f.Pc(45,"translate"),f.Dc(),f.Dc(),f.Ec(46,"ion-toggle",13),f.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ngModelChange_46_listener(e){return t.debugDisplay=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ionChange_46_listener(e){return t.debugDisplayChanged(e)})),f.Dc(),f.Dc(),f.nd(47,CoreSettingsGeneralPage_ion_item_47_Template,9,7,"ion-item",14),f.Dc(),f.Dc()),2&e&&(f.lc(3),f.Vc("text",f.Qc(4,19,"core.back")),f.lc(4),f.qd(f.Qc(8,21,"core.settings.general")),f.lc(7),f.qd(f.Qc(15,23,"core.settings.language")),f.lc(2),f.Vc("ngModel",t.selectedLanguage)("interfaceOptions",f.ad(37,_c1,f.Qc(17,25,"core.settings.language"))),f.lc(2),f.Vc("ngForOf",t.languages),f.lc(4),f.qd(f.Qc(23,27,"core.settings.fontsize")),f.lc(2),f.Vc("ngModel",t.selectedZoomLevel),f.lc(1),f.Vc("ngForOf",t.zoomLevels),f.lc(1),f.Vc("ngIf",t.colorSchemes.length>0),f.lc(1),f.Vc("ngIf",t.colorSchemes.length>0&&"system"==t.selectedScheme&&t.isAndroid),f.lc(4),f.qd(f.Qc(32,29,"core.settings.enablerichtexteditor")),f.lc(3),f.qd(f.Qc(35,31,"core.settings.enablerichtexteditordescription")),f.lc(2),f.Vc("ngModel",t.richTextEditor),f.lc(1),f.Vc("ngIf",t.displayIframeHelp),f.lc(4),f.qd(f.Qc(42,33,"core.settings.debugdisplay")),f.lc(3),f.qd(f.Qc(45,35,"core.settings.debugdisplaydescription")),f.lc(2),f.Vc("ngModel",t.debugDisplay),f.lc(1),f.Vc("ngIf",t.analyticsSupported))},directives:[E.C,E.Ab,E.m,E.h,E.i,E.yb,b.a,E.v,E.P,E.I,E.O,E.lb,E.Ob,D.r,D.u,P.s,E.jb,P.t,E.zb,E.d,E.mb,E.kb,P.w,y.a,E.l],pipes:[T.d],styles:["[_nghost-%COMP%]   .core-settings-general-font-size[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{max-width:250px}"]}),CoreSettingsGeneralPage})();const v=[{path:"",component:G}];let L=(()=>{class CoreSettingsGeneralPageModule{}return CoreSettingsGeneralPageModule.ɵmod=f.wc({type:CoreSettingsGeneralPageModule}),CoreSettingsGeneralPageModule.ɵinj=f.vc({factory:function CoreSettingsGeneralPageModule_Factory(e){return new(e||CoreSettingsGeneralPageModule)},imports:[[i.m.forChild(v),o.a],i.m]}),CoreSettingsGeneralPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&f.kd(L,{declarations:[G],imports:[i.m,o.a],exports:[i.m]}))}}]);