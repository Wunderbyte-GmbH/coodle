(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{EcDH:function(e,o,n){"use strict";n.r(o),n.d(o,"CoodlelandingPageModule",(function(){return k}));var t=n("ofXK"),i=n("3Pt+"),l=n("TEn/"),c=n("fXoL"),a=n("tyNb"),d=n("mrSG"),r=n("pHTc"),s=n("9+EE"),g=n("4pns"),_=n("35jd"),u=n("fjkH"),p=n("bFG1"),f=n("yjU1"),h=n("vPQ6"),m=n("AGMg"),v=n("C1x5"),C=n("nt/U"),P=n("ACYt"),b=n("3CSS"),w=n("sYmb");function CoodlelandingPage_h1_7_Template(e,o){if(1&e&&(c.Ec(0,"h1",6),c.pd(1),c.Dc()),2&e){const e=c.Oc();c.lc(1),c.qd(e.selectedUser)}}const _c0=function(e){return{background:e}};function CoodlelandingPage_ion_content_10_ion_grid_4_ng_container_2_Template(e,o){if(1&e){const e=c.Fc();c.Cc(0),c.Ec(1,"ion-col",11),c.Ec(2,"ion-button",12),c.Mc("click",(function CoodlelandingPage_ion_content_10_ion_grid_4_ng_container_2_Template_ion_button_click_2_listener(){c.fd(e);const n=o.$implicit;return c.Oc(3).openHandler(n)})),c.Pc(3,"translate"),c.zc(4,"ion-icon",13),c.Ec(5,"ion-label"),c.pd(6),c.Pc(7,"translate"),c.Dc(),c.Dc(),c.Dc(),c.Bc()}if(2&e){const e=o.$implicit;c.lc(1),c.Vc("ngStyle",c.ad(8,_c0,e.color)),c.lc(1),c.mc("aria-label",c.Qc(3,4,e.title)),c.lc(2),c.Wc("name",e.icon),c.lc(2),c.qd(c.Qc(7,6,e.title))}}function CoodlelandingPage_ion_content_10_ion_grid_4_Template(e,o){if(1&e&&(c.Ec(0,"ion-grid"),c.Ec(1,"ion-row"),c.nd(2,CoodlelandingPage_ion_content_10_ion_grid_4_ng_container_2_Template,8,10,"ng-container",10),c.Dc(),c.Dc()),2&e){const e=c.Oc(2);c.lc(2),c.Vc("ngForOf",e.buttons)}}function CoodlelandingPage_ion_content_10_ion_grid_5_ng_container_2_Template(e,o){if(1&e){const e=c.Fc();c.Cc(0),c.Ec(1,"ion-col",11),c.Ec(2,"ion-button",12),c.Mc("click",(function CoodlelandingPage_ion_content_10_ion_grid_5_ng_container_2_Template_ion_button_click_2_listener(){c.fd(e);const n=o.$implicit;return c.Oc(3).openHandler(n)})),c.Pc(3,"translate"),c.zc(4,"ion-icon",13),c.Ec(5,"ion-label"),c.pd(6),c.Pc(7,"translate"),c.Dc(),c.Dc(),c.Dc(),c.Bc()}if(2&e){const e=o.$implicit;c.lc(1),c.Vc("ngStyle",c.ad(8,_c0,e.color)),c.lc(1),c.mc("aria-label",c.Qc(3,4,e.title)),c.lc(2),c.Wc("name",e.icon),c.lc(2),c.qd(c.Qc(7,6,e.title))}}function CoodlelandingPage_ion_content_10_ion_grid_5_Template(e,o){if(1&e&&(c.Ec(0,"ion-grid",14),c.Ec(1,"ion-row"),c.nd(2,CoodlelandingPage_ion_content_10_ion_grid_5_ng_container_2_Template,8,10,"ng-container",10),c.Dc(),c.Dc()),2&e){const e=c.Oc(2);c.lc(2),c.Vc("ngForOf",e.advisorButtons)}}function CoodlelandingPage_ion_content_10_Template(e,o){if(1&e){const e=c.Fc();c.Ec(0,"ion-content"),c.Ec(1,"ion-refresher",7),c.Mc("ionRefresh",(function CoodlelandingPage_ion_content_10_Template_ion_refresher_ionRefresh_1_listener(o){c.fd(e);return c.Oc().refreshData(o.target)})),c.zc(2,"ion-refresher-content",8),c.Pc(3,"translate"),c.Dc(),c.nd(4,CoodlelandingPage_ion_content_10_ion_grid_4_Template,3,1,"ion-grid",5),c.nd(5,CoodlelandingPage_ion_content_10_ion_grid_5_Template,3,1,"ion-grid",9),c.Dc()}if(2&e){const e=c.Oc();c.lc(2),c.Wc("pullingText",c.Qc(3,3,"core.pulltorefresh")),c.lc(2),c.Vc("ngIf",!e.isAdvisor),c.lc(1),c.Vc("ngIf",e.isAdvisor)}}let M=(()=>{class CoodlelandingPage{constructor(e,o){this.router=e,this.ws=o,this.isAdvisor=!1,this.isInit=!1,this.selectedUser="",this.colorScheme="light",this.buttons=[{title:"addon.local_coodle.viewdates",icon:"calendar-outline",url:"siteplugins/content/local_coodle/view_dates/0",color:"var(--coodle-dates)"},{title:"addon.local_coodle.viewtodos",icon:"checkbox-outline",url:"siteplugins/content/local_coodle/view_todos/0",color:"var(--coodle-tasks)"},{title:"addon.local_coodle.dok3",icon:"people-outline",url:"siteplugins/content/local_coodle/view_files3/0",color:"var(--coodle-consult"},{title:"addon.local_coodle.dok1",icon:"document-text-outline",url:"siteplugins/content/local_coodle/view_files1/0",color:"var(--coodle-documents)"},{title:"addon.local_coodle.viewaddress",icon:"trail-sign-outline",url:"siteplugins/content/local_coodle/view_address/0",color:"var(--coodle-route)"}],this.advisorButtons=[{title:"addon.local_coodle.viewdates",icon:"calendar-outline",url:"siteplugins/content/local_coodle/view_dates/0",color:"var(--coodle-dates)"},{title:"addon.local_coodle.viewtodos",icon:"checkbox-outline",url:"siteplugins/content/local_coodle/view_todos/0",color:"var(--coodle-tasks)"},{title:"addon.local_coodle.dok3",icon:"people-outline",url:"siteplugins/content/local_coodle/view_files3/0",color:"var(--coodle-consult"},{title:"addon.local_coodle.dok1",icon:"document-text-outline",url:"siteplugins/content/local_coodle/view_files1/0",color:"var(--coodle-documents)"},{title:"addon.local_coodle.viewaddress",icon:"trail-sign-outline",url:"siteplugins/content/local_coodle/view_address/0",color:"var(--coodle-route)"},{title:"addon.local_coodle.selectuser",icon:"person-add-outline",url:"siteplugins/content/local_coodle/select_user/0",color:"var(--coodle-selectuser)"}],u.b.on(u.b.SITE_UPDATED,(()=>Object(d.a)(this,void 0,void 0,(function*(){window.setTimeout((()=>Object(d.a)(this,void 0,void 0,(function*(){const e=yield s.b.getSitesInstances();yield p.a.ignoreErrors(Promise.all(e.map((e=>e.invalidateWsCache())))),u.b.trigger(u.b.LANGUAGE_CHANGED)}))),1e4)}))),s.b.getCurrentSiteId())}ngOnInit(){return Object(d.a)(this,void 0,void 0,(function*(){g.a.getUserPreference("coodleuser_chosen").then((e=>{if(e){const o=JSON.parse(e);o.name&&(this.selectedUser=o.name,this.ws.setUser=o)}this.isInit=!0})).catch((e=>{console.log("error",e)})),u.b.on("USERSELECTED",(()=>{g.a.getUserPreference("coodleuser_chosen").then((e=>{if(e){const o=JSON.parse(e);o.name&&(this.selectedUser=o.name,this.ws.setUser=o)}})).catch((e=>{console.log("error",e)}))})),g.a.getUserPreference("coodle_settings").then((e=>{if(e){!0===JSON.parse(e).isadvisor&&(this.isAdvisor=!0)}this.isInit=!0})).catch((e=>{console.log("error",e)})),this.subscription=_.a.getHandlersObservable().subscribe((e=>{this.allHandlers=e})),yield p.a.ignoreErrors(f.a.markAllNotificationsAsRead())}))}initHandlers(){return Object(d.a)(this,void 0,void 0,(function*(){this.customItems=yield h.a.getCustomMenuItems()}))}ionViewWillEnter(){this.refresher()}refresher(){return Object(d.a)(this,void 0,void 0,(function*(){const e=yield s.b.getSitesInstances();yield p.a.ignoreErrors(Promise.all(e.map((e=>e.invalidateWsCache())))),u.b.trigger(u.b.LANGUAGE_CHANGED)}))}refreshData(e){this.refresher().finally((()=>{e.complete()}))}openHandler(e){var o;const n=null===(o=this.allHandlers)||void 0===o?void 0:o.filter((o=>o.page===e.url))[0];if(n){r.a.navigateToSitePath(n.page,{params:n.pageParams})}}}return CoodlelandingPage.ɵfac=function CoodlelandingPage_Factory(e){return new(e||CoodlelandingPage)(c.yc(a.i),c.yc(m.a))},CoodlelandingPage.ɵcmp=c.sc({type:CoodlelandingPage,selectors:[["app-coodlelanding"]],decls:11,vars:5,consts:[["slot","start"],[3,"text"],["src","../../assets/img/coodlesvg.svg","alt","Coodle Logo",1,"coodlelogo"],["class","headertext",4,"ngIf"],["slot","end"],[4,"ngIf"],[1,"headertext"],["slot","fixed",3,"ionRefresh"],[3,"pullingText"],["class","advisorgrid",4,"ngIf"],[4,"ngFor","ngForOf"],["size","12",1,"landingcol",3,"ngStyle"],[1,"gridbutton",3,"click"],["slot","start",3,"name"],[1,"advisorgrid"]],template:function CoodlelandingPage_Template(e,o){1&e&&(c.Ec(0,"ion-header"),c.Ec(1,"ion-toolbar"),c.Ec(2,"ion-buttons",0),c.zc(3,"ion-back-button",1),c.Pc(4,"translate"),c.Dc(),c.Ec(5,"ion-title"),c.zc(6,"img",2),c.nd(7,CoodlelandingPage_h1_7_Template,2,1,"h1",3),c.Dc(),c.Ec(8,"ion-buttons",4),c.zc(9,"core-user-menu-button"),c.Dc(),c.Dc(),c.Dc(),c.nd(10,CoodlelandingPage_ion_content_10_Template,6,5,"ion-content",5)),2&e&&(c.lc(3),c.Vc("text",c.Qc(4,3,"core.back")),c.lc(4),c.Vc("ngIf",""!==o.selectedUser),c.lc(3),c.Vc("ngIf",o.isInit))},directives:[l.C,l.Ab,l.m,l.h,l.i,l.yb,t.t,v.a,C.a,l.v,l.bb,l.cb,l.B,l.hb,t.s,l.u,t.w,P.a,l.l,l.D,b.a,l.O],pipes:[w.d],styles:[".landingcol[_ngcontent-%COMP%]{height:14vh;margin:7px;overflow:auto}.gridbutton[_ngcontent-%COMP%]{height:100%;width:100%;background:transparent;--background:transparent;margin:0}ion-icon[_ngcontent-%COMP%]{font-size:1.9em}ion-row[_ngcontent-%COMP%]{justify-content:center;margin-bottom:10px}ion-label[_ngcontent-%COMP%]{font-size:5.7vw;white-space:normal;line-height:normal;width:80%;text-align:start;text-transform:none!important}ion-grid[_ngcontent-%COMP%]{overflow:visible}.advisorgrid[_ngcontent-%COMP%]{height:100%;align-items:center}.innergrid[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-direction:column;height:80%}.headertext[_ngcontent-%COMP%]{display:inline-flex;padding-left:10px}@media (prefers-color-scheme:dark){body[_ngcontent-%COMP%]   .coodlelogo[_ngcontent-%COMP%]{display:none}}.coodlelogo.dark[_ngcontent-%COMP%]{filter:invert(1)}"]}),CoodlelandingPage})();var E=n("wG2S");function buildRoutes(e){return[{path:"",component:M},...Object(E.b)(e,{redirectTo:"list",pathMatch:"full"})]}let O=(()=>{class CoodlelandingPageRoutingModule{}return CoodlelandingPageRoutingModule.ɵmod=c.wc({type:CoodlelandingPageRoutingModule}),CoodlelandingPageRoutingModule.ɵinj=c.vc({factory:function CoodlelandingPageRoutingModule_Factory(e){return new(e||CoodlelandingPageRoutingModule)},providers:[{provide:a.g,multi:!0,deps:[c.x],useFactory:buildRoutes}],imports:[a.m]}),CoodlelandingPageRoutingModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&c.kd(O,{exports:[a.m]}));var y=n("dQ3M"),D=n("L3Fv");let k=(()=>{class CoodlelandingPageModule{}return CoodlelandingPageModule.ɵmod=c.wc({type:CoodlelandingPageModule}),CoodlelandingPageModule.ɵinj=c.vc({factory:function CoodlelandingPageModule_Factory(e){return new(e||CoodlelandingPageModule)},imports:[[w.c,D.a,y.a,t.c,i.m,l.Cb,O]]}),CoodlelandingPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&c.kd(k,{declarations:[M],imports:[w.c,D.a,y.a,t.c,i.m,l.Cb,O]}))}}]);